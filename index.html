<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <meta name="build-hash" content="1756274400" />
    <title>CLIENT FLOW 360 - Netflix Style Real Estate CRM with Database v3.0 - ADVANCED_FEATURES</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      body { 
        margin: 0; 
        padding: 0; 
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif; 
        background: #111827; 
        color: white; 
      }
      #root { min-height: 100vh; }
      
      /* Netflix-style animations and effects */
      .line-clamp-2 {
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
      }
      
      /* Smooth transitions for tile effects */
      .group:hover .group-hover\:scale-110 {
        transform: scale(1.1);
      }
      
      /* Enhanced hover effects */
      .tile-hover {
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }
      
      .tile-hover:hover {
        transform: scale(1.05);
        z-index: 10;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="module">
      // Complete Netflix-style CRM with CLIENT FLOW 360 branding + Database Integration  
      // CACHE BUST: BUILD:1756274000 - PROPERTY MANAGEMENT
      const { useState, useEffect, useCallback } = React;
      
      console.log('ðŸŽ¬ CLIENT FLOW 360 - Starting Netflix-style CRM with Database v4.0 - PROPERTY_MANAGEMENT_1756274000 - COMPREHENSIVE PROPERTY SYSTEM...');
      
      // API Service
      const API = {
        baseURL: '/api',
        
        // Health check
        health: async () => {
          try {
            const response = await axios.get(`${API.baseURL}/health`);
            return response.data;
          } catch (error) {
            console.error('Health check failed:', error);
            throw error;
          }
        },
        
        // Clients
        clients: {
          getAll: async () => {
            console.log('ðŸ“¡ Making API call to fetch clients...');
            console.log('ðŸ” API URL:', `${API.baseURL}/clients`);
            console.log('ðŸ” Request method: GET');
            try {
              const response = await axios.get(`${API.baseURL}/clients`);
              console.log('âœ… API response received:', response.data);
              console.log('âœ… Response type:', typeof response.data);
              console.log('âœ… Is array:', Array.isArray(response.data));
              
              // Ensure we always return an array
              const data = response.data;
              if (Array.isArray(data)) {
                return data;
              } else if (data && typeof data === 'object') {
                console.log('âš ï¸ API returned object instead of array, wrapping in array');
                return [data];
              } else {
                console.log('âš ï¸ API returned unexpected format, using empty array');
                return [];
              }
            } catch (error) {
              console.error('âŒ API call failed:', error);
              console.error('âŒ Error response:', error.response?.data);
              console.error('âŒ Error status:', error.response?.status);
              console.log('ðŸ”„ Returning empty array as fallback');
              return [];
            }
          },
          
          getById: async (id) => {
            const response = await axios.get(`${API.baseURL}/clients/${id}`);
            return response.data;
          },
          
          create: async (clientData) => {
            console.log('ðŸ“¡ Creating new client via API...', clientData);
            try {
              const response = await axios.post(`${API.baseURL}/create-client`, clientData);
              console.log('âœ… Client created successfully:', response.data);
              return response.data;
            } catch (error) {
              console.error('âŒ Client creation failed:', error);
              console.error('âŒ Error response:', error.response?.data);
              throw error;
            }
          },
          
          update: async (id, clientData) => {
            const response = await axios.put(`${API.baseURL}/clients/${id}`, clientData);
            return response.data;
          },
          
          delete: async (id) => {
            const response = await axios.delete(`${API.baseURL}/clients/${id}`);
            return response.data;
          }
        },
        
        // Properties
        properties: {
          getByClient: async (clientId) => {
            const response = await axios.get(`${API.baseURL}/clients/${clientId}/properties`);
            return response.data;
          },
          
          create: async (clientId, propertyData) => {
            const response = await axios.post(`${API.baseURL}/clients/${clientId}/properties`, propertyData);
            return response.data;
          }
        },
        
        // Tasks
        tasks: {
          getAll: async () => {
            const response = await axios.get(`${API.baseURL}/tasks`);
            return response.data;
          },
          
          create: async (clientId, taskData) => {
            const response = await axios.post(`${API.baseURL}/clients/${clientId}/tasks`, taskData);
            return response.data;
          }
        },
        
        // Calls
        calls: {
          getByClient: async (clientId) => {
            const response = await axios.get(`${API.baseURL}/calls`, { params: { client_id: clientId } });
            return response.data;
          },
          
          create: async (callData) => {
            const response = await axios.post(`${API.baseURL}/calls`, callData);
            return response.data;
          },
          
          getAll: async () => {
            const response = await axios.get(`${API.baseURL}/calls`);
            return response.data;
          }
        },
        
        // Transactions
        transactions: {
          getByClient: async (clientId) => {
            const response = await axios.get(`${API.baseURL}/transactions`, { params: { client_id: clientId } });
            return response.data;
          },
          
          create: async (clientId, transactionData) => {
            const response = await axios.post(`${API.baseURL}/transactions`, transactionData, { 
              params: { client_id: clientId } 
            });
            return response.data;
          }
        }
      };
      
      function NetflixCRM() {
        const [user, setUser] = useState(null);
        const [clients, setClients] = useState([]);
        const [selectedClient, setSelectedClient] = useState(null);
        const [error, setError] = useState('');
        const [loading, setLoading] = useState(false);
        const [currentView, setCurrentView] = useState('clients');
        const [searchTerm, setSearchTerm] = useState('');
        const [selectedTag, setSelectedTag] = useState('');
        const [isListening, setIsListening] = useState(false);
        const [voiceStatus, setVoiceStatus] = useState('');
        const [showCallModal, setShowCallModal] = useState(null);
        const [showAddClientModal, setShowAddClientModal] = useState(false);
        const [showPropertyModal, setShowPropertyModal] = useState(null);
        const [showAddProperty, setShowAddProperty] = useState(false);
        const [showPropertyDetail, setShowPropertyDetail] = useState(null);
        const [showEditProperty, setShowEditProperty] = useState(null);
        const [propertyFormData, setPropertyFormData] = useState({});
        const [apiHealth, setApiHealth] = useState(null);
        
        // Load clients from database
        const loadClients = useCallback(async () => {
          try {
            setLoading(true);
            setError('');
            console.log('ðŸ”„ Loading clients from database...');
            const clientsData = await API.clients.getAll();
            console.log('ðŸ“Š Received clients data:', clientsData);
            
            // Add mock data structure for UI compatibility
            const enrichedClients = clientsData.map(client => ({
              ...client,
              // Ensure name fields are available in both formats for compatibility
              firstName: client.first_name || client.firstName,
              lastName: client.last_name || client.lastName,
              first_name: client.first_name || client.firstName,
              last_name: client.last_name || client.lastName,
              role: 'BUYER', // Default for now
              stage: 'ACTIVE', // Default for now  
              city: client.address ? client.address.split(',')[1]?.trim() : 'Los Angeles',
              state: client.address ? client.address.split(',')[2]?.trim() || 'CA' : 'CA',
              tags: Array.isArray(client.tags) ? client.tags : (client.tags ? client.tags.split(',') : []),
              lifetimeNetCommission: 15000, // Default for now
              calls: [], // Will load separately if needed
              transactions: [], // Default for now
              todos: [], // Will load separately if needed
              propertiesOfInterest: [] // Will load separately if needed
            }));
            
            console.log('âœ… Enriched clients for UI:', enrichedClients);
            setClients(enrichedClients);
            return enrichedClients;
          } catch (error) {
            console.error('âŒ Failed to load clients:', error);
            setError('Failed to load clients from database - using demo mode');
            return [];
          } finally {
            setLoading(false);
          }
        }, []);
        
        // Initialize app
        useEffect(() => {
          const checkAPIHealth = async () => {
            try {
              console.log('ðŸ” Checking API health...');
              console.log('ðŸ“¡ API base URL:', API.baseURL);
              const health = await API.health();
              console.log('âœ… Health check response:', health);
              console.log('ðŸŽ¯ Setting apiHealth state to:', health);
              setApiHealth(health);
              console.log('âœ… API connection successful:', health);
            } catch (error) {
              console.error('âŒ API connection failed:', error);
              console.error('âŒ Error details:', {
                message: error.message,
                response: error.response?.data,
                status: error.response?.status,
                stack: error.stack
              });
              setError('Database connection failed. Using demo mode.');
              const offlineHealth = { status: 'error', storage: 'Offline' };
              console.log('ðŸ”´ Setting offline health state:', offlineHealth);
              setApiHealth(offlineHealth);
            }
          };
          
          checkAPIHealth();
        }, []);
        
        // Auto-login for demo and load clients
        useEffect(() => {
          console.log('ðŸš€ Auto-login and loading clients...');
          setUser({ firstName: 'Rodrigo', lastName: 'Admin', email: 'rodrigo@realtor.com' });
          
          // If API fails, use demo data
          loadClients().then(clientsFromAPI => {
            if (!clientsFromAPI || clientsFromAPI.length === 0) {
              console.log('ðŸ“ No API data, loading demo clients...');
              loadDemoClients();
            }
          });
        }, [loadClients]);

        // Load demo clients for testing
        const loadDemoClients = () => {
          console.log('ðŸ“ Loading demo clients for testing...');
          const demoClients = [
            {
              id: 'demo-1',
              firstName: 'Sarah',
              lastName: 'Johnson',
              first_name: 'Sarah',
              last_name: 'Johnson',
              email: 'sarah.johnson@email.com',
              phone: '(555) 123-4567',
              address: '123 Oak Street, Los Angeles, CA 90210',
              birthday: '1985-03-15',
              anniversary: '2010-06-20',
              spouse: 'Michael Johnson',
              children: 'Emma (12), Jake (8)',
              notes: 'Looking for a larger home in Beverly Hills area. Budget $2-3M. Prefers modern architecture.',
              tags: ['VIP', 'Luxury', 'Beverly Hills'],
              role: 'BUYER',
              stage: 'ACTIVE',
              city: 'Los Angeles',
              state: 'CA',
              lifetimeNetCommission: 45000,
              lifetime_commission: 45000,
              createdAt: '2024-01-15T10:30:00Z',
              calls: [
                {
                  id: 'call-1',
                  phoneNumber: '(555) 123-4567',
                  duration: 25,
                  notes: 'Discussed Beverly Hills properties. Very interested in modern homes with pools.',
                  outcome: 'Connected',
                  followUpDate: '2024-12-30',
                  follow_up_date: '2024-12-30',
                  createdAt: '2024-12-23T14:30:00Z'
                },
                {
                  id: 'call-2', 
                  phoneNumber: '(555) 123-4567',
                  duration: 15,
                  notes: 'Quick check-in about showing schedule.',
                  outcome: 'Connected',
                  followUpDate: '2024-12-25',
                  follow_up_date: '2024-12-25',
                  createdAt: '2024-12-18T09:15:00Z'
                }
              ],
              transactions: [
                {
                  type: 'sale',
                  address: '456 Sunset Blvd, Beverly Hills, CA',
                  price: 2800000,
                  net_commission: 42000,
                  close_date: '2024-08-15',
                  createdAt: '2024-08-15T16:00:00Z'
                }
              ],
              todos: [
                {
                  text: 'Schedule Beverly Hills property tour',
                  completed: false,
                  dueDate: '2024-12-28',
                  priority: 'high'
                },
                {
                  text: 'Send market analysis report',
                  completed: false, 
                  dueDate: '2024-12-30',
                  priority: 'medium'
                }
              ],
              propertiesOfInterest: [
                {
                  address: '789 Rodeo Drive, Beverly Hills, CA',
                  price: 3200000,
                  bedrooms: 4,
                  bathrooms: 3,
                  sqft: 3500
                },
                {
                  address: '321 Mulholland Drive, Beverly Hills, CA', 
                  price: 2750000,
                  bedrooms: 5,
                  bathrooms: 4,
                  sqft: 4200
                }
              ]
            },
            {
              id: 'demo-2',
              firstName: 'Marcus',
              lastName: 'Rodriguez',
              first_name: 'Marcus',
              last_name: 'Rodriguez',
              email: 'marcus.rodriguez@tech.com',
              phone: '(555) 987-6543',
              address: '456 Pine Avenue, Santa Monica, CA 90405',
              birthday: '1978-09-22',
              spouse: 'Lisa Rodriguez',
              children: 'Sofia (14)',
              notes: 'Tech executive looking to downsize. Interested in luxury condos with ocean views.',
              tags: ['Tech Executive', 'Luxury Condo', 'Ocean View'],
              role: 'SELLER',
              stage: 'ACTIVE', 
              city: 'Santa Monica',
              state: 'CA',
              lifetimeNetCommission: 28000,
              lifetime_commission: 28000,
              createdAt: '2024-02-20T08:45:00Z',
              calls: [
                {
                  id: 'call-3',
                  phoneNumber: '(555) 987-6543',
                  duration: 18,
                  notes: 'Discussed condo options in Santa Monica. Wants ocean view.',
                  outcome: 'Connected',
                  followUpDate: '2024-12-27',
                  follow_up_date: '2024-12-27', 
                  createdAt: '2024-12-20T11:20:00Z'
                }
              ],
              transactions: [],
              todos: [
                {
                  text: 'Research ocean view condos in Santa Monica',
                  completed: false,
                  dueDate: '2024-12-26',
                  priority: 'high'
                }
              ],
              propertiesOfInterest: [
                {
                  address: '100 Ocean Front Walk, Santa Monica, CA',
                  price: 1850000,
                  bedrooms: 3,
                  bathrooms: 2,
                  sqft: 2100
                }
              ]
            },
            {
              id: 'demo-3',
              firstName: 'Jennifer',
              lastName: 'Chen',
              first_name: 'Jennifer', 
              last_name: 'Chen',
              email: 'jennifer.chen@design.com',
              phone: '(555) 456-7890',
              address: '789 Maple Street, West Hollywood, CA 90069',
              birthday: '1990-11-05',
              anniversary: '2018-04-14',
              spouse: 'David Chen',
              notes: 'Interior designer seeking creative spaces. Loves mid-century modern architecture.',
              tags: ['Designer', 'Mid-Century', 'Creative'],
              role: 'BUYER',
              stage: 'ACTIVE',
              city: 'West Hollywood', 
              state: 'CA',
              lifetimeNetCommission: 18500,
              lifetime_commission: 18500,
              createdAt: '2024-03-10T13:15:00Z',
              calls: [],
              transactions: [],
              todos: [
                {
                  text: 'Find mid-century modern homes in West Hollywood',
                  completed: true,
                  dueDate: '2024-12-20',
                  priority: 'medium'
                },
                {
                  text: 'Schedule architecture tour',
                  completed: false,
                  dueDate: '2024-12-29',
                  priority: 'low'
                }
              ],
              propertiesOfInterest: []
            }
          ];
          
          setClients(demoClients);
          console.log('âœ… Demo clients loaded successfully!', demoClients);
        };

        // Property Management Functions
        const handleAddProperty = () => {
          setPropertyFormData({
            address: '',
            price: '',
            bedrooms: '',
            bathrooms: '',
            sqft: '',
            propertyType: 'house',
            status: 'active',
            description: '',
            yearBuilt: '',
            lotSize: '',
            features: '',
            photos: []
          });
          setShowAddProperty(true);
        };

        const handleEditProperty = (property) => {
          setPropertyFormData(property);
          setShowEditProperty(property);
        };

        const handleSaveProperty = () => {
          // In real implementation, this would save to API
          console.log('Saving property:', propertyFormData);
          
          // For demo, add to client's properties
          const newProperty = {
            ...propertyFormData,
            id: showEditProperty?.id || 'prop-' + Date.now(),
            price: parseInt(propertyFormData.price) || 0,
            bedrooms: parseInt(propertyFormData.bedrooms) || 0,
            bathrooms: parseInt(propertyFormData.bathrooms) || 0,
            sqft: parseInt(propertyFormData.sqft) || 0,
            yearBuilt: parseInt(propertyFormData.yearBuilt) || null,
            lotSize: parseFloat(propertyFormData.lotSize) || null,
            createdAt: new Date().toISOString()
          };

          // Update client properties
          if (showEditProperty) {
            // Edit existing
            const updatedProperties = (selectedClient.propertiesOfInterest || []).map(p => 
              p.id === showEditProperty.id ? newProperty : p
            );
            selectedClient.propertiesOfInterest = updatedProperties;
          } else {
            // Add new
            selectedClient.propertiesOfInterest = [...(selectedClient.propertiesOfInterest || []), newProperty];
          }

          setShowAddProperty(false);
          setShowEditProperty(null);
          setVoiceStatus('âœ… Property saved successfully!');
          setTimeout(() => setVoiceStatus(''), 3000);
        };

        const handleDeleteProperty = (propertyId) => {
          if (confirm('Are you sure you want to delete this property?')) {
            selectedClient.propertiesOfInterest = (selectedClient.propertiesOfInterest || []).filter(p => p.id !== propertyId);
            setVoiceStatus('âœ… Property deleted successfully!');
            setTimeout(() => setVoiceStatus(''), 3000);
          }
        };
        
        const login = async (email, password) => {
          if (email === 'rodrigo@realtor.com' && password === 'admin123') {
            setUser({ firstName: 'Rodrigo', lastName: 'Admin', email });
            await loadClients();
            setError('');
          } else {
            setError('Invalid credentials. Use rodrigo@realtor.com / admin123');
          }
        };
        
        const startVoiceRecognition = () => {
          if (!('webkitSpeechRecognition' in window)) {
            setVoiceStatus('âŒ Voice recognition not supported in this browser');
            setTimeout(() => setVoiceStatus(''), 3000);
            return;
          }
          
          const recognition = new webkitSpeechRecognition();
          recognition.continuous = false;
          recognition.interimResults = false;
          recognition.lang = 'en-US';
          
          recognition.onstart = () => {
            setIsListening(true);
            setVoiceStatus('ðŸŽ¤ Listening... Say "Add task for [Client Name] to [task description]"');
          };
          
          recognition.onresult = (event) => {
            const transcript = event.results[0][0].transcript;
            setVoiceStatus('âœ… Voice command received: "' + transcript + '"');
            setIsListening(false);
            
            // Simple demo processing
            setTimeout(() => {
              setVoiceStatus('âœ… Task added successfully via voice command!');
              setTimeout(() => setVoiceStatus(''), 3000);
            }, 1000);
          };
          
          recognition.onerror = () => {
            setIsListening(false);
            setVoiceStatus('âŒ Voice recognition error');
            setTimeout(() => setVoiceStatus(''), 3000);
          };
          
          recognition.onend = () => {
            setIsListening(false);
            if (!voiceStatus.includes('âœ…')) {
              setVoiceStatus('â¹ï¸ No speech detected. Try again.');
              setTimeout(() => setVoiceStatus(''), 3000);
            }
          };
          
          recognition.start();
        };
        
        const addClient = async (clientData) => {
          try {
            setLoading(true);
            console.log('âž• Adding new client:', clientData);
            
            let newClient;
            try {
              newClient = await API.clients.create(clientData);
            } catch (apiError) {
              // API failed, create demo client
              console.log('ðŸ“ API failed, creating demo client...');
              newClient = {
                id: 'demo-' + Date.now(),
                ...clientData,
                createdAt: new Date().toISOString()
              };
            }
            
            // Enrich with UI compatibility data
            const enrichedClient = {
              ...newClient,
              // Ensure name fields are available in both formats for compatibility
              firstName: newClient.first_name || newClient.firstName || clientData.firstName,
              lastName: newClient.last_name || newClient.lastName || clientData.lastName,
              first_name: newClient.first_name || newClient.firstName || clientData.firstName,
              last_name: newClient.last_name || newClient.lastName || clientData.lastName,
              role: 'BUYER',
              stage: 'ACTIVE',
              city: clientData.address ? clientData.address.split(',')[1]?.trim() : 'Los Angeles', 
              state: clientData.address ? clientData.address.split(',')[2]?.trim() || 'CA' : 'CA',
              tags: Array.isArray(clientData.tags) ? clientData.tags : (clientData.tags ? clientData.tags.split(',').map(tag => tag.trim()).filter(tag => tag) : []),
              lifetimeNetCommission: 0,
              calls: [],
              transactions: [],
              todos: [],
              propertiesOfInterest: []
            };
            
            setClients(prevClients => [enrichedClient, ...prevClients]);
            setShowAddClientModal(false);
            setError('');
            
            // Show success message
            setVoiceStatus('âœ… Client added successfully!');
            setTimeout(() => setVoiceStatus(''), 3000);
            
            console.log('âœ… Client added successfully to UI');
            
          } catch (error) {
            console.error('âŒ Failed to add client:', error);
            setError('Failed to add client');
          } finally {
            setLoading(false);
          }
        };
        
        const logCall = async (clientId, callData) => {
          try {
            setLoading(true);
            console.log('ðŸ“ž Logging call for client:', clientId, callData);
            
            const callRecord = await API.calls.create({
              client_id: clientId,
              call_type: 'outbound',
              duration: parseInt(callData.duration) || 0,
              notes: callData.notes,
              outcome: callData.outcome,
              follow_up_date: callData.followUp ? new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString().split('T')[0] : null
            });
            
            console.log('âœ… Call logged successfully:', callRecord);
            
            // Update the client's call history in local state
            setClients(prevClients => 
              prevClients.map(client => 
                client.id === clientId 
                  ? {
                      ...client,
                      calls: [...(client.calls || []), {
                        id: callRecord.id,
                        phoneNumber: client.phone,
                        duration: callRecord.duration,
                        notes: callRecord.notes,
                        outcome: callData.outcome,
                        followUp: !!callRecord.followUpDate,
                        createdAt: callRecord.createdAt
                      }]
                    }
                  : client
              )
            );
            
            setShowCallModal(null);
            setVoiceStatus('âœ… Call logged successfully!');
            setTimeout(() => setVoiceStatus(''), 3000);
            
          } catch (error) {
            console.error('Failed to log call:', error);
            setError('Failed to log call');
          } finally {
            setLoading(false);
          }
        };

        // Filter clients based on search and tag
        const filteredClients = clients.filter(client => {
          const matchesSearch = !searchTerm || 
            `${client.firstName || client.first_name || ''} ${client.lastName || client.last_name || ''}`.toLowerCase().includes(searchTerm.toLowerCase()) ||
            client.email.toLowerCase().includes(searchTerm.toLowerCase()) ||
            client.phone.includes(searchTerm);
          
          const matchesTag = !selectedTag || 
            (client.tags && client.tags.some(tag => tag.toLowerCase().includes(selectedTag.toLowerCase())));
          
          return matchesSearch && matchesTag;
        });

        const allTags = [...new Set(clients.flatMap(client => client.tags || []))];

        if (!user) {
          return React.createElement(LoginForm, { onLogin: login, error });
        }

        return React.createElement('div', { className: 'min-h-screen bg-gray-900 text-white' },
          // Header
          React.createElement('header', { className: 'bg-black p-4 flex justify-between items-center' },
            React.createElement('div', { className: 'flex items-center space-x-4' },
              React.createElement('h1', { 
                className: 'text-2xl font-bold text-red-500',
                style: { fontFamily: 'Arial, sans-serif', letterSpacing: '-0.5px' }
              }, 'CLIENT FLOW 360'),
              React.createElement('div', { 
                className: `text-xs px-2 py-1 rounded ${
                  apiHealth && apiHealth.status === 'ok' ? 'bg-green-600 text-green-100' : 'bg-red-600 text-red-100'
                }`
              }, apiHealth ? `DB: ${apiHealth.storage}` : 'DB: Connecting...')
            ),
            React.createElement('div', { className: 'flex items-center space-x-4' },
              React.createElement('span', { className: 'text-sm' }, `Welcome, ${user.firstName}!`),
              React.createElement('button', {
                onClick: () => setUser(null),
                className: 'bg-red-600 px-3 py-1 rounded text-sm hover:bg-red-700'
              }, 'Logout')
            )
          ),

          // Navigation
          React.createElement('nav', { className: 'bg-gray-800 p-4' },
            React.createElement('div', { className: 'flex space-x-6' },
              ['clients', 'dashboard', 'properties', 'tasks', 'analytics'].map(view =>
                React.createElement('button', {
                  key: view,
                  onClick: () => setCurrentView(view),
                  className: `capitalize px-4 py-2 rounded transition-colors ${
                    currentView === view 
                      ? 'bg-red-600 text-white' 
                      : 'text-gray-300 hover:bg-gray-700'
                  }`
                }, view)
              )
            )
          ),

          // Voice Status
          voiceStatus && React.createElement('div', { 
            className: 'bg-blue-600 text-white p-2 text-center text-sm'
          }, voiceStatus),

          // Error Display
          error && React.createElement('div', { 
            className: 'bg-red-600 text-white p-4 text-center'
          }, error),

          // Loading indicator
          loading && React.createElement('div', { 
            className: 'bg-yellow-600 text-white p-2 text-center text-sm'
          }, 'â³ Loading...'),

          // Main Content
          React.createElement('main', { className: 'p-6' },
            currentView === 'clients' && React.createElement(ClientsView, {
              clients: filteredClients,
              allTags,
              searchTerm,
              setSearchTerm,
              selectedTag,
              setSelectedTag,
              setSelectedClient,
              setShowCallModal,
              setShowAddClientModal,
              setShowPropertyModal,
              startVoiceRecognition,
              isListening
            }),
            
            currentView === 'dashboard' && React.createElement(DashboardView, { clients }),
            currentView === 'properties' && React.createElement(PropertiesView, { clients }),
            currentView === 'tasks' && React.createElement(TasksView, { clients }),
            currentView === 'analytics' && React.createElement(AnalyticsView, { clients })
          ),

          // Modals
          selectedClient && React.createElement(ClientDetailModal, {
            client: selectedClient,
            onClose: () => setSelectedClient(null),
            handleAddProperty,
            handleEditProperty,
            handleSaveProperty,
            handleDeleteProperty,
            showPropertyDetail,
            setShowPropertyDetail,
            showEditProperty,
            setShowEditProperty,
            propertyFormData,
            setPropertyFormData,
            showAddProperty,
            setShowAddProperty,
            setVoiceStatus
          }),

          showCallModal && React.createElement(CallLogModal, {
            client: showCallModal,
            onClose: () => setShowCallModal(null),
            onLog: logCall
          }),

          showAddClientModal && React.createElement(AddClientModal, {
            onClose: () => setShowAddClientModal(false),
            onAdd: addClient
          }),

          // Add/Edit Property Modal
          (showAddProperty || showEditProperty) && React.createElement('div', { 
            className: 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50',
            onClick: () => { setShowAddProperty(false); setShowEditProperty(null); }
          },
            React.createElement('div', { 
              className: 'bg-gray-800 rounded-lg p-6 max-w-2xl w-full mx-4 max-h-96 overflow-y-auto',
              onClick: (e) => e.stopPropagation()
            },
              React.createElement('div', { className: 'flex justify-between items-center mb-4' },
                React.createElement('h3', { className: 'text-xl font-bold' }, 
                  showEditProperty ? `Edit Property - ${showEditProperty.address}` : 'Add New Property'
                ),
                React.createElement('button', {
                  onClick: () => { setShowAddProperty(false); setShowEditProperty(null); },
                  className: 'text-gray-400 hover:text-white text-2xl'
                }, 'Ã—')
              ),
              
              React.createElement('form', { 
                onSubmit: (e) => { e.preventDefault(); handleSaveProperty(); },
                className: 'space-y-4' 
              },
                // Address
                React.createElement('div', null,
                  React.createElement('label', { className: 'block text-sm font-medium text-gray-300 mb-1' }, 'Property Address *'),
                  React.createElement('input', {
                    type: 'text',
                    placeholder: '123 Main Street, Los Angeles, CA 90210',
                    value: propertyFormData.address || '',
                    onChange: (e) => setPropertyFormData(prev => ({ ...prev, address: e.target.value })),
                    className: 'w-full p-3 bg-gray-700 rounded border border-gray-600 text-white placeholder-gray-400',
                    required: true
                  })
                ),
                
                // Price and Property Type
                React.createElement('div', { className: 'grid grid-cols-2 gap-4' },
                  React.createElement('div', null,
                    React.createElement('label', { className: 'block text-sm font-medium text-gray-300 mb-1' }, 'Price *'),
                    React.createElement('input', {
                      type: 'number',
                      placeholder: '750000',
                      value: propertyFormData.price || '',
                      onChange: (e) => setPropertyFormData(prev => ({ ...prev, price: e.target.value })),
                      className: 'w-full p-3 bg-gray-700 rounded border border-gray-600 text-white placeholder-gray-400',
                      required: true
                    })
                  ),
                  React.createElement('div', null,
                    React.createElement('label', { className: 'block text-sm font-medium text-gray-300 mb-1' }, 'Property Type'),
                    React.createElement('select', {
                      value: propertyFormData.propertyType || 'house',
                      onChange: (e) => setPropertyFormData(prev => ({ ...prev, propertyType: e.target.value })),
                      className: 'w-full p-3 bg-gray-700 rounded border border-gray-600 text-white'
                    },
                      React.createElement('option', { value: 'house' }, 'House'),
                      React.createElement('option', { value: 'condo' }, 'Condo'),
                      React.createElement('option', { value: 'townhouse' }, 'Townhouse'),
                      React.createElement('option', { value: 'apartment' }, 'Apartment'),
                      React.createElement('option', { value: 'duplex' }, 'Duplex'),
                      React.createElement('option', { value: 'commercial' }, 'Commercial'),
                      React.createElement('option', { value: 'land' }, 'Land')
                    )
                  )
                ),
                
                // Bedrooms, Bathrooms, Square Feet
                React.createElement('div', { className: 'grid grid-cols-3 gap-4' },
                  React.createElement('div', null,
                    React.createElement('label', { className: 'block text-sm font-medium text-gray-300 mb-1' }, 'Bedrooms'),
                    React.createElement('input', {
                      type: 'number',
                      placeholder: '3',
                      value: propertyFormData.bedrooms || '',
                      onChange: (e) => setPropertyFormData(prev => ({ ...prev, bedrooms: e.target.value })),
                      className: 'w-full p-3 bg-gray-700 rounded border border-gray-600 text-white placeholder-gray-400'
                    })
                  ),
                  React.createElement('div', null,
                    React.createElement('label', { className: 'block text-sm font-medium text-gray-300 mb-1' }, 'Bathrooms'),
                    React.createElement('input', {
                      type: 'number',
                      step: '0.5',
                      placeholder: '2.5',
                      value: propertyFormData.bathrooms || '',
                      onChange: (e) => setPropertyFormData(prev => ({ ...prev, bathrooms: e.target.value })),
                      className: 'w-full p-3 bg-gray-700 rounded border border-gray-600 text-white placeholder-gray-400'
                    })
                  ),
                  React.createElement('div', null,
                    React.createElement('label', { className: 'block text-sm font-medium text-gray-300 mb-1' }, 'Square Feet'),
                    React.createElement('input', {
                      type: 'number',
                      placeholder: '2500',
                      value: propertyFormData.sqft || '',
                      onChange: (e) => setPropertyFormData(prev => ({ ...prev, sqft: e.target.value })),
                      className: 'w-full p-3 bg-gray-700 rounded border border-gray-600 text-white placeholder-gray-400'
                    })
                  )
                ),
                
                // Year Built, Lot Size, Status
                React.createElement('div', { className: 'grid grid-cols-3 gap-4' },
                  React.createElement('div', null,
                    React.createElement('label', { className: 'block text-sm font-medium text-gray-300 mb-1' }, 'Year Built'),
                    React.createElement('input', {
                      type: 'number',
                      placeholder: '2010',
                      value: propertyFormData.yearBuilt || '',
                      onChange: (e) => setPropertyFormData(prev => ({ ...prev, yearBuilt: e.target.value })),
                      className: 'w-full p-3 bg-gray-700 rounded border border-gray-600 text-white placeholder-gray-400'
                    })
                  ),
                  React.createElement('div', null,
                    React.createElement('label', { className: 'block text-sm font-medium text-gray-300 mb-1' }, 'Lot Size (acres)'),
                    React.createElement('input', {
                      type: 'number',
                      step: '0.1',
                      placeholder: '0.25',
                      value: propertyFormData.lotSize || '',
                      onChange: (e) => setPropertyFormData(prev => ({ ...prev, lotSize: e.target.value })),
                      className: 'w-full p-3 bg-gray-700 rounded border border-gray-600 text-white placeholder-gray-400'
                    })
                  ),
                  React.createElement('div', null,
                    React.createElement('label', { className: 'block text-sm font-medium text-gray-300 mb-1' }, 'Status'),
                    React.createElement('select', {
                      value: propertyFormData.status || 'active',
                      onChange: (e) => setPropertyFormData(prev => ({ ...prev, status: e.target.value })),
                      className: 'w-full p-3 bg-gray-700 rounded border border-gray-600 text-white'
                    },
                      React.createElement('option', { value: 'active' }, 'Active'),
                      React.createElement('option', { value: 'pending' }, 'Pending'),
                      React.createElement('option', { value: 'sold' }, 'Sold'),
                      React.createElement('option', { value: 'withdrawn' }, 'Withdrawn'),
                      React.createElement('option', { value: 'contingent' }, 'Contingent')
                    )
                  )
                ),
                
                // Description
                React.createElement('div', null,
                  React.createElement('label', { className: 'block text-sm font-medium text-gray-300 mb-1' }, 'Description'),
                  React.createElement('textarea', {
                    placeholder: 'Beautiful modern home with stunning views...',
                    value: propertyFormData.description || '',
                    onChange: (e) => setPropertyFormData(prev => ({ ...prev, description: e.target.value })),
                    rows: 3,
                    className: 'w-full p-3 bg-gray-700 rounded border border-gray-600 text-white placeholder-gray-400'
                  })
                ),
                
                // Features
                React.createElement('div', null,
                  React.createElement('label', { className: 'block text-sm font-medium text-gray-300 mb-1' }, 'Key Features'),
                  React.createElement('input', {
                    type: 'text',
                    placeholder: 'Pool, Garage, Fireplace, Hardwood Floors, etc.',
                    value: propertyFormData.features || '',
                    onChange: (e) => setPropertyFormData(prev => ({ ...prev, features: e.target.value })),
                    className: 'w-full p-3 bg-gray-700 rounded border border-gray-600 text-white placeholder-gray-400'
                  })
                ),
                
                // Action Buttons
                React.createElement('div', { className: 'flex space-x-3 pt-4 border-t border-gray-600' },
                  React.createElement('button', {
                    type: 'submit',
                    className: 'flex-1 bg-green-600 text-white p-3 rounded hover:bg-green-700 font-semibold'
                  }, showEditProperty ? 'ðŸ’¾ Update Property' : 'ðŸ  Add Property'),
                  React.createElement('button', {
                    type: 'button',
                    onClick: () => { setShowAddProperty(false); setShowEditProperty(null); },
                    className: 'flex-1 bg-gray-600 text-white p-3 rounded hover:bg-gray-700'
                  }, 'âŒ Cancel')
                )
              )
            )
          ),

          showPropertyModal && React.createElement(PropertyModal, {
            client: showPropertyModal,
            onClose: () => setShowPropertyModal(null)
          })
        );
      }

      // Login Form Component
      function LoginForm({ onLogin, error }) {
        const [email, setEmail] = useState('rodrigo@realtor.com');
        const [password, setPassword] = useState('admin123');

        const handleSubmit = (e) => {
          e.preventDefault();
          onLogin(email, password);
        };

        return React.createElement('div', { 
          className: 'min-h-screen bg-gray-900 flex items-center justify-center'
        },
          React.createElement('div', { className: 'bg-gray-800 p-8 rounded-lg shadow-xl w-96' },
            React.createElement('h1', { 
              className: 'text-3xl font-bold text-red-500 mb-6 text-center',
              style: { fontFamily: 'Arial, sans-serif', letterSpacing: '-0.5px' }
            }, 'CLIENT FLOW 360'),
            
            error && React.createElement('div', { 
              className: 'bg-red-600 text-white p-3 rounded mb-4 text-sm'
            }, error),
            
            React.createElement('form', { onSubmit: handleSubmit, className: 'space-y-4' },
              React.createElement('input', {
                type: 'email',
                placeholder: 'Email',
                value: email,
                onChange: (e) => setEmail(e.target.value),
                className: 'w-full p-3 bg-gray-700 rounded border border-gray-600 text-white placeholder-gray-400 focus:border-red-500 focus:outline-none',
                required: true
              }),
              React.createElement('input', {
                type: 'password',
                placeholder: 'Password',
                value: password,
                onChange: (e) => setPassword(e.target.value),
                className: 'w-full p-3 bg-gray-700 rounded border border-gray-600 text-white placeholder-gray-400 focus:border-red-500 focus:outline-none',
                required: true
              }),
              React.createElement('button', {
                type: 'submit',
                className: 'w-full bg-red-600 text-white p-3 rounded hover:bg-red-700 transition-colors font-semibold'
              }, 'Login')
            ),
            
            React.createElement('div', { className: 'mt-4 text-center text-gray-400 text-sm' },
              'Demo: rodrigo@realtor.com / admin123'
            )
          )
        );
      }

      // Clients View Component
      function ClientsView({ 
        clients, allTags, searchTerm, setSearchTerm, selectedTag, setSelectedTag, 
        setSelectedClient, setShowCallModal, setShowAddClientModal, setShowPropertyModal,
        startVoiceRecognition, isListening 
      }) {
        return React.createElement('div', null,
          React.createElement('div', { className: 'flex justify-between items-center mb-6' },
            React.createElement('div', null,
              React.createElement('h2', { className: 'text-3xl font-bold mb-1' }, 'My Clients'),
              React.createElement('p', { className: 'text-gray-400' }, `${clients.length} active clients in your portfolio`)
            ),
            React.createElement('div', { className: 'flex space-x-3' },
              React.createElement('button', {
                onClick: () => setShowAddClientModal(true),
                className: 'bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition-colors'
              }, '+ Add Client'),
              React.createElement('button', {
                onClick: startVoiceRecognition,
                disabled: isListening,
                className: `px-4 py-2 rounded transition-colors ${
                  isListening 
                    ? 'bg-red-600 text-white cursor-not-allowed' 
                    : 'bg-blue-600 text-white hover:bg-blue-700'
                }`
              }, isListening ? 'ðŸŽ¤ Listening...' : 'ðŸŽ¤ Voice Command')
            )
          ),

          // Search and Filters
          React.createElement('div', { className: 'mb-6 flex space-x-4' },
            React.createElement('input', {
              type: 'text',
              placeholder: 'Search clients...',
              value: searchTerm,
              onChange: (e) => setSearchTerm(e.target.value),
              className: 'flex-1 p-3 bg-gray-800 rounded border border-gray-700 text-white placeholder-gray-400 focus:border-red-500 focus:outline-none'
            }),
            React.createElement('select', {
              value: selectedTag,
              onChange: (e) => setSelectedTag(e.target.value),
              className: 'p-3 bg-gray-800 rounded border border-gray-700 text-white focus:border-red-500 focus:outline-none'
            },
              React.createElement('option', { value: '' }, 'All Tags'),
              allTags.map(tag => 
                React.createElement('option', { key: tag, value: tag }, tag)
              )
            )
          ),

          // Stats
          React.createElement('div', { className: 'grid grid-cols-1 md:grid-cols-4 gap-4 mb-6' },
            React.createElement('div', { className: 'bg-gray-800 p-4 rounded' },
              React.createElement('div', { className: 'text-2xl font-bold text-green-400' }, clients.length),
              React.createElement('div', { className: 'text-gray-400' }, 'Total Clients')
            ),
            React.createElement('div', { className: 'bg-gray-800 p-4 rounded' },
              React.createElement('div', { className: 'text-2xl font-bold text-blue-400' }, 
                clients.filter(c => c.stage === 'ACTIVE').length
              ),
              React.createElement('div', { className: 'text-gray-400' }, 'Active Deals')
            ),
            React.createElement('div', { className: 'bg-gray-800 p-4 rounded' },
              React.createElement('div', { className: 'text-2xl font-bold text-yellow-400' }, 
                `$${clients.reduce((sum, c) => sum + (c.lifetimeNetCommission || 0), 0).toLocaleString()}`
              ),
              React.createElement('div', { className: 'text-gray-400' }, 'Total Commission')
            ),
            React.createElement('div', { className: 'bg-gray-800 p-4 rounded' },
              React.createElement('div', { className: 'text-2xl font-bold text-purple-400' }, 
                clients.reduce((sum, c) => sum + (c.calls ? c.calls.length : 0), 0)
              ),
              React.createElement('div', { className: 'text-gray-400' }, 'Total Calls')
            )
          ),

          // Netflix-style Clients Grid with horizontal scroll on mobile
          React.createElement('div', { 
            className: 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 pb-20',
            style: { minHeight: '400px' } // Ensure space for hover overlays
          },
            clients.map(client => React.createElement(ClientCard, {
              key: client.id,
              client,
              onViewDetails: () => setSelectedClient(client),
              onLogCall: () => setShowCallModal(client),
              onManageProperties: () => setShowPropertyModal(client)
            }))
          ),

          clients.length === 0 && React.createElement('div', { 
            className: 'text-center py-12 text-gray-400'
          }, 
            React.createElement('p', { className: 'text-xl mb-2' }, 'No clients found'),
            React.createElement('p', null, 'Try adjusting your search or filters')
          )
        );
      }

      // Client Card Component - Netflix Movie Tile Style
      function ClientCard({ client, onViewDetails, onLogCall, onManageProperties }) {
        const clientName = `${client.firstName || client.first_name || 'Unknown'} ${client.lastName || client.last_name || 'Client'}`;
        const initials = `${(client.firstName || client.first_name || 'A')[0]}${(client.lastName || client.last_name || 'A')[0]}`;
        
        // Birthday calculations
        const getBirthdayInfo = (birthdayStr) => {
          if (!birthdayStr) return null;
          
          const today = new Date();
          const birthday = new Date(birthdayStr);
          const thisYear = today.getFullYear();
          
          // Set birthday to this year
          const thisYearBirthday = new Date(thisYear, birthday.getMonth(), birthday.getDate());
          
          // If birthday already passed this year, use next year
          const nextBirthday = thisYearBirthday < today 
            ? new Date(thisYear + 1, birthday.getMonth(), birthday.getDate())
            : thisYearBirthday;
          
          const daysUntil = Math.ceil((nextBirthday - today) / (1000 * 60 * 60 * 24));
          
          return {
            date: birthday,
            daysUntil,
            isUpcoming: daysUntil <= 30,
            isSoon: daysUntil <= 7,
            isToday: daysUntil === 0
          };
        };
        
        const birthdayInfo = getBirthdayInfo(client.birthday);
        
        // Generate a unique gradient based on client name for visual variety
        const gradients = [
          'from-red-600 to-red-800',
          'from-blue-600 to-blue-800', 
          'from-green-600 to-green-800',
          'from-purple-600 to-purple-800',
          'from-yellow-600 to-yellow-800',
          'from-pink-600 to-pink-800',
          'from-indigo-600 to-indigo-800',
          'from-teal-600 to-teal-800'
        ];
        const gradientIndex = (clientName.charCodeAt(0) + clientName.charCodeAt(1)) % gradients.length;
        const gradient = gradients[gradientIndex];

        return React.createElement('div', { 
          className: 'relative group cursor-pointer transform transition-all duration-300 hover:scale-105',
          onClick: onViewDetails,
          style: { aspectRatio: '16/9' }
        },
          // Main Netflix-style tile
          React.createElement('div', { 
            className: `relative w-full h-full bg-gradient-to-br ${gradient} rounded-lg overflow-hidden shadow-xl`
          },
            // Background pattern for visual interest
            React.createElement('div', {
              className: 'absolute inset-0 opacity-20',
              style: {
                backgroundImage: 'radial-gradient(circle at 50% 50%, rgba(255,255,255,0.1) 1px, transparent 1px)',
                backgroundSize: '20px 20px'
              }
            }),
            
            // Status badges (top-right corner)
            React.createElement('div', { className: 'absolute top-3 right-3 flex flex-col gap-1' },
              React.createElement('div', { 
                className: `px-2 py-1 rounded-full text-xs font-bold ${
                  client.stage === 'ACTIVE' ? 'bg-green-500 text-white' :
                  client.stage === 'PENDING' ? 'bg-yellow-500 text-black' :
                  'bg-gray-500 text-white'
                }`
              }, client.stage || 'ACTIVE'),
              
              // Birthday badge
              birthdayInfo && birthdayInfo.isUpcoming && React.createElement('div', {
                className: `px-2 py-1 rounded-full text-xs font-bold ${
                  birthdayInfo.isToday ? 'bg-pink-500 text-white animate-pulse' :
                  birthdayInfo.isSoon ? 'bg-orange-500 text-white' :
                  'bg-blue-500 text-white'
                }`
              }, 
                birthdayInfo.isToday ? 'ðŸŽ‚ TODAY!' :
                birthdayInfo.isSoon ? `ðŸŽ‚ ${birthdayInfo.daysUntil}d` :
                `ðŸŽ‚ ${birthdayInfo.daysUntil}d`
              )
            ),

            // Client avatar (large, centered)
            React.createElement('div', { className: 'absolute inset-0 flex items-center justify-center' },
              React.createElement('div', { 
                className: 'w-20 h-20 bg-black bg-opacity-30 rounded-full flex items-center justify-center text-white font-bold text-3xl border-4 border-white border-opacity-50'
              }, initials)
            ),

            // Client info overlay (bottom)
            React.createElement('div', { 
              className: 'absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black via-black to-transparent p-4'
            },
              React.createElement('h3', { className: 'text-white font-bold text-lg mb-1' }, clientName),
              React.createElement('p', { className: 'text-gray-300 text-sm mb-2' }, client.email),
              React.createElement('div', { className: 'flex items-center justify-between' },
                React.createElement('span', { className: 'text-green-400 font-semibold text-sm' }, 
                  `$${(client.lifetimeNetCommission || 0).toLocaleString()}`
                ),
                React.createElement('span', { className: 'text-gray-400 text-xs' }, 
                  `${client.calls ? client.calls.length : 0} calls`
                )
              )
            ),

            // Tags overlay (top-left)
            client.tags && client.tags.length > 0 && React.createElement('div', { 
              className: 'absolute top-3 left-3 flex flex-wrap gap-1'
            },
              client.tags.slice(0, 2).map((tag, index) =>
                React.createElement('span', {
                  key: index,
                  className: 'px-2 py-1 bg-black bg-opacity-60 text-white rounded text-xs font-medium'
                }, tag)
              )
            )
          ),

          // Netflix-style hover overlay with actions
          React.createElement('div', { 
            className: 'absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-60 transition-all duration-300 flex items-center justify-center opacity-0 group-hover:opacity-100'
          },
            React.createElement('div', { className: 'flex space-x-3' },
              React.createElement('button', {
                onClick: (e) => { e.stopPropagation(); onViewDetails(); },
                className: 'bg-white text-black px-4 py-2 rounded-full font-semibold hover:bg-gray-200 transition-colors flex items-center space-x-2'
              }, 
                React.createElement('span', null, 'â–¶'),
                React.createElement('span', null, 'Details')
              ),
              React.createElement('button', {
                onClick: (e) => { e.stopPropagation(); onLogCall(); },
                className: 'bg-gray-700 text-white px-4 py-2 rounded-full font-semibold hover:bg-gray-600 transition-colors flex items-center space-x-2'
              }, 
                React.createElement('span', null, 'ðŸ“ž'),
                React.createElement('span', null, 'Call')
              ),
              React.createElement('button', {
                onClick: (e) => { e.stopPropagation(); onManageProperties(); },
                className: 'bg-gray-700 text-white px-4 py-2 rounded-full font-semibold hover:bg-gray-600 transition-colors flex items-center space-x-2'
              }, 
                React.createElement('span', null, 'ðŸ '),
                React.createElement('span', null, 'Properties')
              )
            )
          ),

          // Netflix-style bottom info bar (appears on hover)
          React.createElement('div', { 
            className: 'absolute -bottom-20 left-0 right-0 bg-gray-800 p-4 rounded-b-lg shadow-xl opacity-0 group-hover:opacity-100 transform group-hover:translate-y-0 translate-y-2 transition-all duration-300'
          },
            React.createElement('div', { className: 'flex justify-between items-start mb-2' },
              React.createElement('div', null,
                React.createElement('p', { className: 'text-white font-semibold' }, clientName),
                React.createElement('p', { className: 'text-gray-400 text-sm' }, 
                  `ðŸ“ ${client.city || 'Los Angeles'}, ${client.state || 'CA'}`
                )
              ),
              React.createElement('div', { className: 'text-right' },
                React.createElement('p', { className: 'text-green-400 font-bold' }, 
                  `$${(client.lifetimeNetCommission || 0).toLocaleString()}`
                ),
                React.createElement('p', { className: 'text-gray-400 text-xs' }, 'LTV')
              )
            ),
            client.tags && client.tags.length > 0 && React.createElement('div', { className: 'flex flex-wrap gap-1 mb-2' },
              client.tags.map((tag, index) =>
                React.createElement('span', {
                  key: index,
                  className: 'px-2 py-1 bg-blue-600 text-blue-100 rounded text-xs'
                }, tag)
              )
            ),
            client.notes && React.createElement('p', { className: 'text-gray-300 text-sm line-clamp-2' }, 
              client.notes
            )
          )
        );
      }

      // Dashboard View Component
      function DashboardView({ clients }) {
        const today = new Date();
        const thisMonth = today.getMonth();
        const thisYear = today.getFullYear();
        
        // Birthday calculations
        const getUpcomingBirthdays = (clients) => {
          return clients.filter(client => client.birthday).map(client => {
            const birthday = new Date(client.birthday);
            const thisYearBirthday = new Date(thisYear, birthday.getMonth(), birthday.getDate());
            const nextBirthday = thisYearBirthday < today 
              ? new Date(thisYear + 1, birthday.getMonth(), birthday.getDate())
              : thisYearBirthday;
            const daysUntil = Math.ceil((nextBirthday - today) / (1000 * 60 * 60 * 24));
            
            return {
              ...client,
              daysUntil,
              isToday: daysUntil === 0,
              nextBirthday
            };
          }).filter(client => client.daysUntil <= 30)
            .sort((a, b) => a.daysUntil - b.daysUntil);
        };
        
        const upcomingBirthdays = getUpcomingBirthdays(clients);
        
        const monthlyStats = {
          newClients: clients.filter(c => {
            const created = new Date(c.createdAt || c.created_at);
            return created.getMonth() === thisMonth && created.getFullYear() === thisYear;
          }).length,
          totalCommission: clients.reduce((sum, c) => sum + (c.lifetimeNetCommission || c.lifetime_commission || 0), 0),
          activDeals: clients.filter(c => c.stage === 'ACTIVE').length,
          callsMade: clients.reduce((sum, c) => sum + (c.calls ? c.calls.length : 0), 0),
          upcomingBirthdays: upcomingBirthdays.length
        };

        return React.createElement('div', null,
          React.createElement('h2', { className: 'text-3xl font-bold mb-6' }, 'Dashboard'),
          
          React.createElement('div', { className: 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8' },
            React.createElement('div', { className: 'bg-gradient-to-r from-blue-600 to-blue-800 p-6 rounded-lg text-white' },
              React.createElement('h3', { className: 'text-lg font-semibold mb-2' }, 'New Clients This Month'),
              React.createElement('p', { className: 'text-3xl font-bold' }, monthlyStats.newClients),
              React.createElement('p', { className: 'text-blue-200 text-sm' }, 'Total clients added')
            ),
            React.createElement('div', { className: 'bg-gradient-to-r from-green-600 to-green-800 p-6 rounded-lg text-white' },
              React.createElement('h3', { className: 'text-lg font-semibold mb-2' }, 'Total Commission'),
              React.createElement('p', { className: 'text-3xl font-bold' }, `$${monthlyStats.totalCommission.toLocaleString()}`),
              React.createElement('p', { className: 'text-green-200 text-sm' }, 'Lifetime value')
            ),
            React.createElement('div', { className: 'bg-gradient-to-r from-pink-600 to-pink-800 p-6 rounded-lg text-white' },
              React.createElement('h3', { className: 'text-lg font-semibold mb-2' }, 'Upcoming Birthdays'),
              React.createElement('p', { className: 'text-3xl font-bold' }, monthlyStats.upcomingBirthdays),
              React.createElement('p', { className: 'text-pink-200 text-sm' }, 'Next 30 days')
            ),
            React.createElement('div', { className: 'bg-gradient-to-r from-yellow-600 to-yellow-800 p-6 rounded-lg text-white' },
              React.createElement('h3', { className: 'text-lg font-semibold mb-2' }, 'Active Deals'),
              React.createElement('p', { className: 'text-3xl font-bold' }, monthlyStats.activDeals),
              React.createElement('p', { className: 'text-yellow-200 text-sm' }, 'In progress')
            ),
            React.createElement('div', { className: 'bg-gradient-to-r from-purple-600 to-purple-800 p-6 rounded-lg text-white' },
              React.createElement('h3', { className: 'text-lg font-semibold mb-2' }, 'Calls Made'),
              React.createElement('p', { className: 'text-3xl font-bold' }, monthlyStats.callsMade),
              React.createElement('p', { className: 'text-purple-200 text-sm' }, 'Total calls logged')
            )
          ),

          // Birthday Alerts Section
          upcomingBirthdays.length > 0 && React.createElement('div', { className: 'mb-8' },
            React.createElement('div', { className: 'bg-gradient-to-r from-pink-500 to-rose-500 p-6 rounded-lg' },
              React.createElement('h3', { className: 'text-xl font-semibold mb-4 text-white flex items-center' },
                React.createElement('span', { className: 'mr-2' }, 'ðŸŽ‚'),
                'Upcoming Birthdays'
              ),
              React.createElement('div', { className: 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4' },
                upcomingBirthdays.map(client =>
                  React.createElement('div', { 
                    key: client.id, 
                    className: `bg-white bg-opacity-20 p-4 rounded-lg ${client.isToday ? 'ring-4 ring-yellow-300 animate-pulse' : ''}`
                  },
                    React.createElement('div', { className: 'flex items-center justify-between' },
                      React.createElement('div', null,
                        React.createElement('p', { className: 'font-semibold text-white' }, 
                          `${client.firstName || client.first_name} ${client.lastName || client.last_name}`
                        ),
                        React.createElement('p', { className: 'text-pink-100 text-sm' }, 
                          client.nextBirthday.toLocaleDateString('en-US', { month: 'long', day: 'numeric' })
                        )
                      ),
                      React.createElement('div', { className: 'text-right' },
                        React.createElement('p', { className: `font-bold text-lg ${client.isToday ? 'text-yellow-300' : 'text-white'}` }, 
                          client.isToday ? 'TODAY!' : client.daysUntil === 1 ? 'Tomorrow' : `${client.daysUntil} days`
                        )
                      )
                    )
                  )
                )
              )
            )
          ),

          React.createElement('div', { className: 'grid grid-cols-1 lg:grid-cols-2 gap-8' },
            React.createElement('div', { className: 'bg-gray-800 p-6 rounded-lg' },
              React.createElement('h3', { className: 'text-xl font-semibold mb-4' }, 'Recent Clients'),
              React.createElement('div', { className: 'space-y-4' },
                clients.slice(0, 5).map(client =>
                  React.createElement('div', { 
                    key: client.id, 
                    className: 'flex items-center justify-between p-3 bg-gray-700 rounded'
                  },
                    React.createElement('div', null,
                      React.createElement('p', { className: 'font-semibold' }, 
                        `${client.firstName || client.first_name || 'Unknown'} ${client.lastName || client.last_name || 'Client'}`
                      ),
                      React.createElement('p', { className: 'text-sm text-gray-400' }, client.email)
                    ),
                    React.createElement('span', { 
                      className: `px-2 py-1 rounded text-xs ${
                        client.stage === 'ACTIVE' ? 'bg-green-600 text-green-100' : 'bg-gray-600 text-gray-100'
                      }`
                    }, client.stage || 'ACTIVE')
                  )
                )
              )
            ),

            React.createElement('div', { className: 'bg-gray-800 p-6 rounded-lg' },
              React.createElement('h3', { className: 'text-xl font-semibold mb-4' }, 'Top Performers'),
              React.createElement('div', { className: 'space-y-4' },
                clients
                  .sort((a, b) => (b.lifetimeNetCommission || 0) - (a.lifetimeNetCommission || 0))
                  .slice(0, 5)
                  .map(client =>
                    React.createElement('div', { 
                      key: client.id, 
                      className: 'flex items-center justify-between p-3 bg-gray-700 rounded'
                    },
                      React.createElement('div', null,
                        React.createElement('p', { className: 'font-semibold' }, 
                          `${client.firstName || client.first_name || 'Unknown'} ${client.lastName || client.last_name || 'Client'}`
                        ),
                        React.createElement('p', { className: 'text-sm text-gray-400' }, 
                          `${client.calls ? client.calls.length : 0} calls`
                        )
                      ),
                      React.createElement('span', { className: 'text-green-400 font-semibold' }, 
                        `$${(client.lifetimeNetCommission || 0).toLocaleString()}`
                      )
                    )
                  )
              )
            )
          )
        );
      }

      // Properties View Component
      function PropertiesView({ clients }) {
        const [propertySearchTerm, setPropertySearchTerm] = useState('');
        const [priceRange, setPriceRange] = useState('');
        const [propertyTypeFilter, setPropertyTypeFilter] = useState('');
        const [statusFilter, setStatusFilter] = useState('');
        const [bedroomsFilter, setBedroomsFilter] = useState('');
        const [showPropertyDetail, setShowPropertyDetail] = useState(null);
        
        const allProperties = clients.flatMap(client => 
          (client.propertiesOfInterest || []).map(property => ({
            ...property,
            clientName: `${client.firstName || client.first_name || 'Unknown'} ${client.lastName || client.last_name || 'Client'}`,
            clientId: client.id,
            clientEmail: client.email,
            clientPhone: client.phone
          }))
        );

        // Filter properties based on search criteria
        const filteredProperties = allProperties.filter(property => {
          const matchesSearch = !propertySearchTerm || 
            property.address?.toLowerCase().includes(propertySearchTerm.toLowerCase()) ||
            property.clientName?.toLowerCase().includes(propertySearchTerm.toLowerCase()) ||
            property.description?.toLowerCase().includes(propertySearchTerm.toLowerCase());

          const matchesPrice = !priceRange || (() => {
            const price = property.price || 0;
            switch(priceRange) {
              case 'under-500k': return price < 500000;
              case '500k-1m': return price >= 500000 && price < 1000000;
              case '1m-2m': return price >= 1000000 && price < 2000000;
              case '2m-5m': return price >= 2000000 && price < 5000000;
              case 'over-5m': return price >= 5000000;
              default: return true;
            }
          })();

          const matchesType = !propertyTypeFilter || property.propertyType === propertyTypeFilter;
          const matchesStatus = !statusFilter || property.status === statusFilter;
          const matchesBedrooms = !bedroomsFilter || property.bedrooms >= parseInt(bedroomsFilter);

          return matchesSearch && matchesPrice && matchesType && matchesStatus && matchesBedrooms;
        });

        return React.createElement('div', null,
          React.createElement('div', { className: 'flex justify-between items-center mb-6' },
            React.createElement('div', null,
              React.createElement('h2', { className: 'text-3xl font-bold mb-1' }, 'Property Management'),
              React.createElement('p', { className: 'text-gray-400' }, `${filteredProperties.length} properties found`)
            ),
            React.createElement('button', {
              onClick: () => {
                // In a real app, this would open add property modal
                alert('Add Property functionality available in client 360Â° view');
              },
              className: 'bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 flex items-center space-x-2'
            },
              React.createElement('span', null, '+'),
              React.createElement('span', null, 'Add Property')
            )
          ),

          // Search and Filters
          React.createElement('div', { className: 'bg-gray-800 p-4 rounded-lg mb-6' },
            React.createElement('div', { className: 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4' },
              React.createElement('input', {
                type: 'text',
                placeholder: 'Search properties or clients...',
                value: propertySearchTerm,
                onChange: (e) => setPropertySearchTerm(e.target.value),
                className: 'p-3 bg-gray-700 rounded border border-gray-600 text-white placeholder-gray-400 focus:border-blue-500'
              }),
              React.createElement('select', {
                value: priceRange,
                onChange: (e) => setPriceRange(e.target.value),
                className: 'p-3 bg-gray-700 rounded border border-gray-600 text-white focus:border-blue-500'
              },
                React.createElement('option', { value: '' }, 'All Prices'),
                React.createElement('option', { value: 'under-500k' }, 'Under $500K'),
                React.createElement('option', { value: '500k-1m' }, '$500K - $1M'),
                React.createElement('option', { value: '1m-2m' }, '$1M - $2M'),
                React.createElement('option', { value: '2m-5m' }, '$2M - $5M'),
                React.createElement('option', { value: 'over-5m' }, 'Over $5M')
              ),
              React.createElement('select', {
                value: propertyTypeFilter,
                onChange: (e) => setPropertyTypeFilter(e.target.value),
                className: 'p-3 bg-gray-700 rounded border border-gray-600 text-white focus:border-blue-500'
              },
                React.createElement('option', { value: '' }, 'All Types'),
                React.createElement('option', { value: 'house' }, 'House'),
                React.createElement('option', { value: 'condo' }, 'Condo'),
                React.createElement('option', { value: 'townhouse' }, 'Townhouse'),
                React.createElement('option', { value: 'apartment' }, 'Apartment'),
                React.createElement('option', { value: 'duplex' }, 'Duplex'),
                React.createElement('option', { value: 'commercial' }, 'Commercial'),
                React.createElement('option', { value: 'land' }, 'Land')
              ),
              React.createElement('select', {
                value: statusFilter,
                onChange: (e) => setStatusFilter(e.target.value),
                className: 'p-3 bg-gray-700 rounded border border-gray-600 text-white focus:border-blue-500'
              },
                React.createElement('option', { value: '' }, 'All Status'),
                React.createElement('option', { value: 'active' }, 'Active'),
                React.createElement('option', { value: 'pending' }, 'Pending'),
                React.createElement('option', { value: 'sold' }, 'Sold'),
                React.createElement('option', { value: 'withdrawn' }, 'Withdrawn'),
                React.createElement('option', { value: 'contingent' }, 'Contingent')
              ),
              React.createElement('select', {
                value: bedroomsFilter,
                onChange: (e) => setBedroomsFilter(e.target.value),
                className: 'p-3 bg-gray-700 rounded border border-gray-600 text-white focus:border-blue-500'
              },
                React.createElement('option', { value: '' }, 'Any Bedrooms'),
                React.createElement('option', { value: '1' }, '1+ Bedrooms'),
                React.createElement('option', { value: '2' }, '2+ Bedrooms'),
                React.createElement('option', { value: '3' }, '3+ Bedrooms'),
                React.createElement('option', { value: '4' }, '4+ Bedrooms'),
                React.createElement('option', { value: '5' }, '5+ Bedrooms')
              )
            )
          ),

          // Properties Grid
          filteredProperties.length === 0 ? 
            React.createElement('div', { className: 'text-center py-12 text-gray-400' },
              React.createElement('div', { className: 'text-6xl mb-4' }, 'ðŸ '),
              React.createElement('p', { className: 'text-xl mb-2' }, 
                allProperties.length === 0 ? 'No properties found' : 'No properties match your filters'
              ),
              React.createElement('p', null, 
                allProperties.length === 0 ? 'Properties will appear here when added to clients' : 'Try adjusting your search criteria'
              )
            ) :
            React.createElement('div', { className: 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6' },
              filteredProperties.map((property, index) =>
                React.createElement('div', { 
                  key: `${property.clientId}-${property.id || index}`, 
                  className: 'bg-gray-800 rounded-lg p-6 border border-gray-700 hover:border-blue-500 transition-colors cursor-pointer',
                  onClick: () => setShowPropertyDetail(property)
                },
                  React.createElement('div', { className: 'flex justify-between items-start mb-3' },
                    React.createElement('div', null,
                      React.createElement('h3', { className: 'text-xl font-semibold mb-2 text-white' }, property.address || 'Address not provided'),
                      React.createElement('p', { className: 'text-green-400 font-bold text-2xl' }, 
                        `$${(property.price || 0).toLocaleString()}`
                      )
                    ),
                    React.createElement('span', { 
                      className: `px-2 py-1 rounded text-xs ${
                        property.status === 'active' ? 'bg-green-600 text-green-100' :
                        property.status === 'pending' ? 'bg-yellow-600 text-yellow-100' :
                        property.status === 'sold' ? 'bg-red-600 text-red-100' : 'bg-gray-600'
                      }`
                    }, (property.status || 'active').toUpperCase())
                  ),
                  React.createElement('div', { className: 'grid grid-cols-3 gap-4 mb-3 text-sm text-gray-300' },
                    React.createElement('div', null, `ðŸ›ï¸ ${property.bedrooms || 0} bed`),
                    React.createElement('div', null, `ðŸš¿ ${property.bathrooms || 0} bath`),
                    React.createElement('div', null, `ðŸ“ ${(property.sqft || 0).toLocaleString()} sqft`)
                  ),
                  React.createElement('div', { className: 'border-t border-gray-600 pt-3' },
                    React.createElement('p', { className: 'text-sm text-blue-400 mb-1' }, `Client: ${property.clientName}`),
                    React.createElement('p', { className: 'text-xs text-gray-500' }, 
                      `${property.propertyType ? property.propertyType.charAt(0).toUpperCase() + property.propertyType.slice(1) : 'House'} â€¢ ${property.yearBuilt ? property.yearBuilt : 'Year unknown'}`
                    ),
                    property.description && React.createElement('p', { className: 'text-sm text-gray-400 mt-2 line-clamp-2' }, 
                      property.description
                    )
                  )
                )
              )
            ),
            
          // Property Detail Modal
          showPropertyDetail && React.createElement('div', { 
            className: 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50',
            onClick: () => setShowPropertyDetail(null)
          },
            React.createElement('div', { 
              className: 'bg-gray-800 rounded-lg p-6 max-w-3xl w-full mx-4 max-h-96 overflow-y-auto',
              onClick: (e) => e.stopPropagation()
            },
              React.createElement('div', { className: 'flex justify-between items-center mb-4' },
                React.createElement('h3', { className: 'text-2xl font-bold' }, showPropertyDetail.address),
                React.createElement('button', {
                  onClick: () => setShowPropertyDetail(null),
                  className: 'text-gray-400 hover:text-white text-2xl'
                }, 'Ã—')
              ),
              React.createElement('div', { className: 'grid grid-cols-1 lg:grid-cols-2 gap-6' },
                React.createElement('div', { className: 'space-y-4' },
                  React.createElement('div', null,
                    React.createElement('p', { className: 'text-3xl font-bold text-green-400 mb-2' }, 
                      `$${showPropertyDetail.price.toLocaleString()}`
                    ),
                    React.createElement('span', { 
                      className: `px-3 py-1 rounded ${
                        showPropertyDetail.status === 'active' ? 'bg-green-600 text-green-100' :
                        showPropertyDetail.status === 'pending' ? 'bg-yellow-600 text-yellow-100' :
                        'bg-red-600 text-red-100'
                      }`
                    }, (showPropertyDetail.status || 'active').toUpperCase())
                  ),
                  React.createElement('div', { className: 'grid grid-cols-2 gap-4' },
                    React.createElement('div', null,
                      React.createElement('p', { className: 'text-sm text-gray-400' }, 'Bedrooms'),
                      React.createElement('p', { className: 'font-semibold text-lg' }, `ðŸ›ï¸ ${showPropertyDetail.bedrooms}`)
                    ),
                    React.createElement('div', null,
                      React.createElement('p', { className: 'text-sm text-gray-400' }, 'Bathrooms'),
                      React.createElement('p', { className: 'font-semibold text-lg' }, `ðŸš¿ ${showPropertyDetail.bathrooms}`)
                    )
                  ),
                  showPropertyDetail.description && React.createElement('div', null,
                    React.createElement('p', { className: 'text-sm text-gray-400' }, 'Description'),
                    React.createElement('p', { className: 'text-gray-300' }, showPropertyDetail.description)
                  )
                ),
                React.createElement('div', { className: 'space-y-4' },
                  React.createElement('div', { className: 'bg-gray-700 p-4 rounded' },
                    React.createElement('h4', { className: 'font-semibold mb-2 text-blue-300' }, 'Client Information'),
                    React.createElement('p', { className: 'font-semibold' }, showPropertyDetail.clientName),
                    React.createElement('p', { className: 'text-sm text-gray-400' }, showPropertyDetail.clientEmail),
                    React.createElement('p', { className: 'text-sm text-gray-400' }, showPropertyDetail.clientPhone)
                  ),
                  React.createElement('div', { className: 'grid grid-cols-2 gap-4 text-sm' },
                    React.createElement('div', null,
                      React.createElement('p', { className: 'text-gray-400' }, 'Square Feet'),
                      React.createElement('p', { className: 'font-semibold' }, showPropertyDetail.sqft?.toLocaleString())
                    ),
                    React.createElement('div', null,
                      React.createElement('p', { className: 'text-gray-400' }, 'Year Built'),
                      React.createElement('p', { className: 'font-semibold' }, showPropertyDetail.yearBuilt || 'Unknown')
                    )
                  )
                )
              )
            )
          )
        );
      }

      // Tasks View Component
      function TasksView({ clients }) {
        const allTasks = clients.flatMap(client => 
          (client.todos || []).map(task => ({
            ...task,
            clientName: `${client.firstName || client.first_name || 'Unknown'} ${client.lastName || client.last_name || 'Client'}`,
            clientId: client.id
          }))
        );

        return React.createElement('div', null,
          React.createElement('h2', { className: 'text-3xl font-bold mb-6' }, 'Tasks'),
          
          allTasks.length === 0 ? 
            React.createElement('div', { className: 'text-center py-12 text-gray-400' },
              React.createElement('p', { className: 'text-xl mb-2' }, 'No tasks found'),
              React.createElement('p', null, 'Tasks will appear here when you add them to clients')
            ) :
            React.createElement('div', { className: 'space-y-4' },
              allTasks.map((task, index) =>
                React.createElement('div', { 
                  key: index, 
                  className: 'bg-gray-800 rounded-lg p-4 flex items-center justify-between'
                },
                  React.createElement('div', null,
                    React.createElement('h3', { className: 'font-semibold' }, task.text),
                    React.createElement('p', { className: 'text-sm text-gray-400' }, 
                      `Client: ${task.clientName}`
                    )
                  ),
                  React.createElement('span', { 
                    className: `px-3 py-1 rounded text-sm ${
                      task.completed ? 'bg-green-600 text-green-100' : 'bg-yellow-600 text-yellow-100'
                    }`
                  }, task.completed ? 'Completed' : 'Pending')
                )
              )
            )
        );
      }

      // Analytics View Component
      function AnalyticsView({ clients }) {
        const analytics = {
          totalClients: clients.length,
          averageCommission: clients.length > 0 ? 
            clients.reduce((sum, c) => sum + (c.lifetimeNetCommission || 0), 0) / clients.length : 0,
          clientsByTag: clients.reduce((acc, client) => {
            (client.tags || []).forEach(tag => {
              acc[tag] = (acc[tag] || 0) + 1;
            });
            return acc;
          }, {}),
          clientsByCity: clients.reduce((acc, client) => {
            const city = client.city || 'Unknown';
            acc[city] = (acc[city] || 0) + 1;
            return acc;
          }, {})
        };

        return React.createElement('div', null,
          React.createElement('h2', { className: 'text-3xl font-bold mb-6' }, 'Analytics'),
          
          React.createElement('div', { className: 'grid grid-cols-1 lg:grid-cols-2 gap-8' },
            React.createElement('div', { className: 'bg-gray-800 p-6 rounded-lg' },
              React.createElement('h3', { className: 'text-xl font-semibold mb-4' }, 'Clients by Tag'),
              React.createElement('div', { className: 'space-y-3' },
                Object.entries(analytics.clientsByTag).map(([tag, count]) =>
                  React.createElement('div', { key: tag, className: 'flex justify-between items-center' },
                    React.createElement('span', null, tag),
                    React.createElement('span', { className: 'bg-blue-600 text-white px-2 py-1 rounded text-sm' }, count)
                  )
                )
              )
            ),

            React.createElement('div', { className: 'bg-gray-800 p-6 rounded-lg' },
              React.createElement('h3', { className: 'text-xl font-semibold mb-4' }, 'Clients by City'),
              React.createElement('div', { className: 'space-y-3' },
                Object.entries(analytics.clientsByCity).map(([city, count]) =>
                  React.createElement('div', { key: city, className: 'flex justify-between items-center' },
                    React.createElement('span', null, city),
                    React.createElement('span', { className: 'bg-green-600 text-white px-2 py-1 rounded text-sm' }, count)
                  )
                )
              )
            )
          ),

          React.createElement('div', { className: 'mt-8 bg-gray-800 p-6 rounded-lg' },
            React.createElement('h3', { className: 'text-xl font-semibold mb-4' }, 'Summary Statistics'),
            React.createElement('div', { className: 'grid grid-cols-1 md:grid-cols-3 gap-6' },
              React.createElement('div', { className: 'text-center' },
                React.createElement('p', { className: 'text-2xl font-bold text-blue-400' }, analytics.totalClients),
                React.createElement('p', { className: 'text-gray-400' }, 'Total Clients')
              ),
              React.createElement('div', { className: 'text-center' },
                React.createElement('p', { className: 'text-2xl font-bold text-green-400' }, 
                  `$${Math.round(analytics.averageCommission).toLocaleString()}`
                ),
                React.createElement('p', { className: 'text-gray-400' }, 'Average Commission')
              ),
              React.createElement('div', { className: 'text-center' },
                React.createElement('p', { className: 'text-2xl font-bold text-purple-400' }, 
                  Object.keys(analytics.clientsByTag).length
                ),
                React.createElement('p', { className: 'text-gray-400' }, 'Unique Tags')
              )
            )
          )
        );
      }

      // 360Â° Client Detail Modal Component
      function ClientDetailModal({ 
        client, 
        onClose, 
        handleAddProperty, 
        handleEditProperty, 
        handleSaveProperty, 
        handleDeleteProperty,
        showPropertyDetail,
        setShowPropertyDetail,
        showEditProperty,
        setShowEditProperty,
        propertyFormData,
        setPropertyFormData,
        showAddProperty,
        setShowAddProperty,
        setVoiceStatus
      }) {
        const [activeTab, setActiveTab] = useState('overview');
        const [isEditing, setIsEditing] = useState(false);
        const [editData, setEditData] = useState({});
        const [showAddTask, setShowAddTask] = useState(false);
        const [loading, setLoading] = useState(false);
        
        // Initialize edit data when editing starts
        React.useEffect(() => {
          if (isEditing) {
            setEditData({
              firstName: client.firstName || client.first_name || '',
              lastName: client.lastName || client.last_name || '',
              email: client.email || '',
              phone: client.phone || '',
              address: client.address || '',
              birthday: client.birthday || '',
              anniversary: client.anniversary || '',
              spouse: client.spouse || '',
              children: client.children || '',
              notes: client.notes || '',
              tags: (client.tags || []).join(', ')
            });
          }
        }, [isEditing, client]);

        const tabs = [
          { id: 'overview', label: 'ðŸ‘¤ Complete Overview', icon: 'ðŸ‘¤' },
          { id: 'properties', label: 'ðŸ  Properties', icon: 'ðŸ ' },
          { id: 'tasks', label: 'âœ“ Tasks', icon: 'âœ“' },
          { id: 'activity', label: 'ðŸ“ˆ Activity', icon: 'ðŸ“ˆ' }
        ];

        const handleSaveEdit = async () => {
          setLoading(true);
          try {
            // Here you would call your API to update the client
            console.log('Saving client updates:', editData);
            // await API.clients.update(client.id, editData);
            setIsEditing(false);
            // You'd want to refresh the client data here or update the parent component
          } catch (error) {
            console.error('Failed to update client:', error);
          } finally {
            setLoading(false);
          }
        };

        const handleCallClient = async (phoneNumber) => {
          try {
            // Simulate making a call and auto-logging it
            console.log(`ðŸ“ž Calling ${phoneNumber}...`);
            
            // Auto-create call log with future follow-up
            const callData = {
              client_id: client.id,
              call_type: 'outbound',
              duration: 0, // Will be filled when call ends
              notes: `Called ${phoneNumber} from 360Â° view`,
              outcome: 'Connected', // Default
              follow_up_date: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString().split('T')[0] // +7 days
            };
            
            // In real implementation, this would integrate with phone system
            // await API.calls.create(callData);
            
            alert(`ðŸ“ž Calling ${phoneNumber}...\n\nâœ… Call logged automatically!\nðŸ“… Follow-up scheduled for ${callData.follow_up_date}`);
            
          } catch (error) {
            console.error('Failed to initiate call:', error);
            alert('âŒ Failed to make call. Please try again.');
          }
        };

        const [showDeleteConfirm, setShowDeleteConfirm] = useState(false);

        const handleDeleteClient = async () => {
          try {
            setLoading(true);
            // Here you would call your API to delete the client
            console.log('Deleting client:', client.id);
            // await API.clients.delete(client.id);
            
            // Close modal and show success
            onClose();
            alert(`âœ… Client ${client.firstName || client.first_name} ${client.lastName || client.last_name} has been deleted successfully!`);
            
            // In real implementation, you'd also refresh the client list
            // window.location.reload(); // or better: call a refresh function
            
          } catch (error) {
            console.error('Failed to delete client:', error);
            alert('âŒ Failed to delete client. Please try again.');
          } finally {
            setLoading(false);
            setShowDeleteConfirm(false);
          }
        };

        const renderOverviewTab = () => {
          if (isEditing) {
            return React.createElement('div', { className: 'space-y-4' },
              React.createElement('div', { className: 'grid grid-cols-2 gap-4' },
                React.createElement('input', {
                  type: 'text',
                  placeholder: 'First Name',
                  value: editData.firstName,
                  onChange: (e) => setEditData(prev => ({ ...prev, firstName: e.target.value })),
                  className: 'p-3 bg-gray-700 rounded border border-gray-600 text-white'
                }),
                React.createElement('input', {
                  type: 'text',
                  placeholder: 'Last Name',
                  value: editData.lastName,
                  onChange: (e) => setEditData(prev => ({ ...prev, lastName: e.target.value })),
                  className: 'p-3 bg-gray-700 rounded border border-gray-600 text-white'
                })
              ),
              React.createElement('input', {
                type: 'email',
                placeholder: 'Email',
                value: editData.email,
                onChange: (e) => setEditData(prev => ({ ...prev, email: e.target.value })),
                className: 'w-full p-3 bg-gray-700 rounded border border-gray-600 text-white'
              }),
              React.createElement('input', {
                type: 'tel',
                placeholder: 'Phone',
                value: editData.phone,
                onChange: (e) => setEditData(prev => ({ ...prev, phone: e.target.value })),
                className: 'w-full p-3 bg-gray-700 rounded border border-gray-600 text-white'
              }),
              React.createElement('input', {
                type: 'text',
                placeholder: 'Address',
                value: editData.address,
                onChange: (e) => setEditData(prev => ({ ...prev, address: e.target.value })),
                className: 'w-full p-3 bg-gray-700 rounded border border-gray-600 text-white'
              }),
              React.createElement('div', { className: 'grid grid-cols-2 gap-4' },
                React.createElement('input', {
                  type: 'date',
                  placeholder: 'Birthday',
                  value: editData.birthday,
                  onChange: (e) => setEditData(prev => ({ ...prev, birthday: e.target.value })),
                  className: 'p-3 bg-gray-700 rounded border border-gray-600 text-white'
                }),
                React.createElement('input', {
                  type: 'date',
                  placeholder: 'Anniversary',
                  value: editData.anniversary,
                  onChange: (e) => setEditData(prev => ({ ...prev, anniversary: e.target.value })),
                  className: 'p-3 bg-gray-700 rounded border border-gray-600 text-white'
                })
              ),
              React.createElement('div', { className: 'grid grid-cols-2 gap-4' },
                React.createElement('input', {
                  type: 'text',
                  placeholder: 'Spouse Name',
                  value: editData.spouse,
                  onChange: (e) => setEditData(prev => ({ ...prev, spouse: e.target.value })),
                  className: 'p-3 bg-gray-700 rounded border border-gray-600 text-white'
                }),
                React.createElement('input', {
                  type: 'text',
                  placeholder: 'Children',
                  value: editData.children,
                  onChange: (e) => setEditData(prev => ({ ...prev, children: e.target.value })),
                  className: 'p-3 bg-gray-700 rounded border border-gray-600 text-white'
                })
              ),
              React.createElement('input', {
                type: 'text',
                placeholder: 'Tags (comma-separated)',
                value: editData.tags,
                onChange: (e) => setEditData(prev => ({ ...prev, tags: e.target.value })),
                className: 'w-full p-3 bg-gray-700 rounded border border-gray-600 text-white'
              }),
              React.createElement('textarea', {
                placeholder: 'Notes',
                value: editData.notes,
                onChange: (e) => setEditData(prev => ({ ...prev, notes: e.target.value })),
                rows: 4,
                className: 'w-full p-3 bg-gray-700 rounded border border-gray-600 text-white'
              }),
              React.createElement('div', { className: 'flex space-x-3 pt-4' },
                React.createElement('button', {
                  onClick: handleSaveEdit,
                  disabled: loading,
                  className: 'flex-1 bg-green-600 text-white p-3 rounded hover:bg-green-700 disabled:opacity-50'
                }, loading ? 'ðŸ’¾ Saving...' : 'ðŸ’¾ Save Changes'),
                React.createElement('button', {
                  onClick: () => setIsEditing(false),
                  className: 'flex-1 bg-gray-600 text-white p-3 rounded hover:bg-gray-700'
                }, 'âŒ Cancel')
              )
            );
          }

          // Get call history with follow-up dates
          const calls = client.calls || [];
          const sortedCalls = calls.sort((a, b) => new Date(b.createdAt || b.date) - new Date(a.createdAt || a.date));
          const lastCall = sortedCalls[0];
          const nextCallbackDate = lastCall?.followUpDate || lastCall?.follow_up_date;

          // Get properties and tasks for full overview
          const properties = client.propertiesOfInterest || [];
          const tasks = client.todos || [];
          const pendingTasks = tasks.filter(task => !task.completed);

          return React.createElement('div', { className: 'space-y-6' },
            // Client Header with Quick Actions
            React.createElement('div', { className: 'bg-gradient-to-r from-blue-600 to-purple-600 p-6 rounded-lg text-white' },
              React.createElement('div', { className: 'flex justify-between items-start' },
                React.createElement('div', null,
                  React.createElement('h3', { className: 'text-2xl font-bold mb-2' }, 
                    `${client.firstName || client.first_name || 'Unknown'} ${client.lastName || client.last_name || 'Client'}`
                  ),
                  React.createElement('div', { className: 'space-y-1' },
                    React.createElement('p', { className: 'flex items-center' }, 
                      'ðŸ“§ ', 
                      React.createElement('a', { 
                        href: `mailto:${client.email}`, 
                        className: 'text-blue-200 hover:text-white ml-2' 
                      }, client.email)
                    ),
                    client.phone && React.createElement('p', { className: 'flex items-center' }, 
                      'ðŸ“ž ',
                      React.createElement('button', {
                        onClick: () => handleCallClient(client.phone),
                        className: 'text-blue-200 hover:text-white ml-2 underline cursor-pointer bg-transparent border-none'
                      }, client.phone),
                      React.createElement('span', { className: 'ml-2 text-xs bg-green-500 px-2 py-1 rounded' }, 'ðŸ‘† Click to call')
                    ),
                    client.address && React.createElement('p', null, 'ðŸ“ ', client.address),
                    
                    // Next callback reminder
                    nextCallbackDate && React.createElement('p', { className: 'flex items-center mt-2 bg-yellow-600 bg-opacity-30 px-3 py-1 rounded' },
                      'ðŸ“… ',
                      React.createElement('span', { className: 'ml-2 text-yellow-200' }, 
                        `Next callback: ${new Date(nextCallbackDate).toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' })}`
                      )
                    )
                  )
                ),
                React.createElement('div', { className: 'text-right' },
                  React.createElement('div', { className: 'text-3xl font-bold text-green-300' }, 
                    `$${(client.lifetimeNetCommission || client.lifetime_commission || 0).toLocaleString()}`
                  ),
                  React.createElement('div', { className: 'text-sm text-blue-200' }, 'Lifetime Value')
                )
              )
            ),

            // Personal Information (removed heart emoji)
            (client.birthday || client.anniversary || client.spouse || client.children) && 
            React.createElement('div', { className: 'bg-gray-700 p-4 rounded-lg' },
              React.createElement('h4', { className: 'text-lg font-semibold mb-3 text-blue-300' }, 'Personal Information'),
              React.createElement('div', { className: 'grid grid-cols-2 gap-4' },
                client.birthday && React.createElement('div', null,
                  React.createElement('p', { className: 'text-sm text-gray-400' }, 'Birthday'),
                  React.createElement('p', { className: 'font-semibold' }, 
                    `ðŸŽ‚ ${new Date(client.birthday).toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' })}`
                  )
                ),
                client.anniversary && React.createElement('div', null,
                  React.createElement('p', { className: 'text-sm text-gray-400' }, 'Anniversary'),
                  React.createElement('p', { className: 'font-semibold' }, 
                    `ðŸ’ ${new Date(client.anniversary).toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' })}`
                  )
                ),
                client.spouse && React.createElement('div', null,
                  React.createElement('p', { className: 'text-sm text-gray-400' }, 'Spouse'),
                  React.createElement('p', { className: 'font-semibold' }, `ðŸ‘« ${client.spouse}`)
                ),
                client.children && React.createElement('div', null,
                  React.createElement('p', { className: 'text-sm text-gray-400' }, 'Children'),
                  React.createElement('p', { className: 'font-semibold' }, `ðŸ‘¶ ${client.children}`)
                )
              )
            ),

            // Call Log Section
            React.createElement('div', { className: 'bg-gray-700 p-4 rounded-lg' },
              React.createElement('h4', { className: 'text-lg font-semibold mb-3 text-blue-300 flex items-center justify-between' }, 
                React.createElement('span', null, `ðŸ“ž Call History (${calls.length})`),
                calls.length > 3 && React.createElement('span', { className: 'text-xs text-gray-400' }, 'Showing latest 3')
              ),
              calls.length === 0 ? 
                React.createElement('p', { className: 'text-gray-400 text-center py-4' }, 'No calls logged yet') :
                React.createElement('div', { className: 'space-y-3' },
                  sortedCalls.slice(0, 3).map((call, index) =>
                    React.createElement('div', { 
                      key: index, 
                      className: 'bg-gray-600 p-3 rounded border-l-4 border-blue-500'
                    },
                      React.createElement('div', { className: 'flex justify-between items-start' },
                        React.createElement('div', null,
                          React.createElement('p', { className: 'font-semibold text-sm' }, 
                            `${call.outcome || 'Unknown'} - ${call.duration || 0} minutes`
                          ),
                          React.createElement('p', { className: 'text-xs text-gray-300 mt-1' }, 
                            call.notes || 'No notes'
                          ),
                          (call.followUpDate || call.follow_up_date) && React.createElement('p', { className: 'text-xs text-yellow-400 mt-1' },
                            `ðŸ“… Follow-up: ${new Date(call.followUpDate || call.follow_up_date).toLocaleDateString()}`
                          )
                        ),
                        React.createElement('span', { className: 'text-xs text-gray-400' }, 
                          call.createdAt ? new Date(call.createdAt).toLocaleDateString('en-US', { 
                            month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit' 
                          }) : 'Date unknown'
                        )
                      )
                    )
                  )
                )
            ),

            // Properties Overview
            React.createElement('div', { className: 'bg-gray-700 p-4 rounded-lg' },
              React.createElement('h4', { className: 'text-lg font-semibold mb-3 text-green-300 flex items-center justify-between' }, 
                React.createElement('span', null, `ðŸ  Properties (${properties.length})`),
                React.createElement('button', {
                  onClick: () => setShowAddProperty(true),
                  className: 'text-xs bg-green-600 px-3 py-1 rounded hover:bg-green-700'
                }, '+ Add')
              ),
              properties.length === 0 ? 
                React.createElement('p', { className: 'text-gray-400 text-center py-4' }, 'No properties of interest') :
                React.createElement('div', { className: 'space-y-2' },
                  properties.slice(0, 2).map((property, index) =>
                    React.createElement('div', { 
                      key: index, 
                      className: 'bg-gray-600 p-3 rounded flex justify-between items-center'
                    },
                      React.createElement('div', null,
                        React.createElement('p', { className: 'font-semibold text-sm' }, property.address),
                        React.createElement('p', { className: 'text-xs text-green-400' }, 
                          `$${property.price.toLocaleString()} â€¢ ${property.bedrooms}bed/${property.bathrooms}bath`
                        )
                      ),
                      React.createElement('button', { className: 'text-blue-400 text-xs' }, 'View')
                    )
                  ),
                  properties.length > 2 && React.createElement('p', { className: 'text-xs text-gray-400 text-center pt-2' },
                    `... and ${properties.length - 2} more properties`
                  )
                )
            ),

            // Tasks Overview
            React.createElement('div', { className: 'bg-gray-700 p-4 rounded-lg' },
              React.createElement('h4', { className: 'text-lg font-semibold mb-3 text-yellow-300 flex items-center justify-between' }, 
                React.createElement('span', null, `âœ“ Tasks (${pendingTasks.length} pending)`),
                React.createElement('button', {
                  onClick: () => setShowAddTask(true),
                  className: 'text-xs bg-yellow-600 px-3 py-1 rounded hover:bg-yellow-700'
                }, '+ Add')
              ),
              pendingTasks.length === 0 ? 
                React.createElement('p', { className: 'text-gray-400 text-center py-4' }, 'No pending tasks') :
                React.createElement('div', { className: 'space-y-2' },
                  pendingTasks.slice(0, 3).map((task, index) =>
                    React.createElement('div', { 
                      key: index, 
                      className: 'bg-gray-600 p-3 rounded flex items-center justify-between'
                    },
                      React.createElement('div', { className: 'flex items-center space-x-3' },
                        React.createElement('input', {
                          type: 'checkbox',
                          checked: false,
                          onChange: () => console.log('Toggle task:', task),
                          className: 'w-4 h-4'
                        }),
                        React.createElement('div', null,
                          React.createElement('p', { className: 'font-semibold text-sm' }, task.text),
                          React.createElement('p', { className: 'text-xs text-gray-400' }, 
                            task.dueDate ? `Due: ${new Date(task.dueDate).toLocaleDateString()}` : 'No due date'
                          )
                        )
                      ),
                      React.createElement('span', { 
                        className: `px-2 py-1 rounded text-xs ${
                          task.priority === 'high' ? 'bg-red-600' :
                          task.priority === 'medium' ? 'bg-yellow-600' : 'bg-green-600'
                        }`
                      }, task.priority || 'low')
                    )
                  ),
                  pendingTasks.length > 3 && React.createElement('p', { className: 'text-xs text-gray-400 text-center pt-2' },
                    `... and ${pendingTasks.length - 3} more tasks`
                  )
                )
            ),

            // Commission Summary
            React.createElement('div', { className: 'bg-gray-700 p-4 rounded-lg' },
              React.createElement('h4', { className: 'text-lg font-semibold mb-3 text-green-300' }, 'ðŸ’° Commission Summary'),
              React.createElement('div', { className: 'grid grid-cols-3 gap-4 text-center' },
                React.createElement('div', null,
                  React.createElement('p', { className: 'text-2xl font-bold text-green-400' }, 
                    `$${(client.lifetimeNetCommission || client.lifetime_commission || 0).toLocaleString()}`
                  ),
                  React.createElement('p', { className: 'text-sm text-gray-400' }, 'Total Commission')
                ),
                React.createElement('div', null,
                  React.createElement('p', { className: 'text-2xl font-bold text-blue-400' }, 
                    (client.transactions || []).length
                  ),
                  React.createElement('p', { className: 'text-sm text-gray-400' }, 'Transactions')
                ),
                React.createElement('div', null,
                  React.createElement('p', { className: 'text-2xl font-bold text-purple-400' }, 
                    calls.length
                  ),
                  React.createElement('p', { className: 'text-sm text-gray-400' }, 'Total Calls')
                )
              )
            ),

            // Tags
            client.tags && client.tags.length > 0 && React.createElement('div', null,
              React.createElement('h4', { className: 'text-lg font-semibold mb-3' }, 'ðŸ·ï¸ Tags'),
              React.createElement('div', { className: 'flex flex-wrap gap-2' },
                client.tags.map((tag, index) =>
                  React.createElement('span', {
                    key: index,
                    className: 'px-3 py-1 bg-blue-600 text-blue-100 rounded-full text-sm font-medium'
                  }, tag)
                )
              )
            ),

            // Notes
            client.notes && React.createElement('div', null,
              React.createElement('h4', { className: 'text-lg font-semibold mb-3' }, 'ðŸ“ Notes'),
              React.createElement('div', { className: 'bg-gray-700 p-4 rounded-lg' },
                React.createElement('p', { className: 'text-gray-300 leading-relaxed' }, client.notes)
              )
            ),

            // Delete Confirmation Modal
            showDeleteConfirm && React.createElement('div', { 
              className: 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50',
              onClick: () => setShowDeleteConfirm(false)
            },
              React.createElement('div', { 
                className: 'bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4',
                onClick: (e) => e.stopPropagation()
              },
                React.createElement('div', { className: 'text-center' },
                  React.createElement('div', { className: 'text-6xl mb-4' }, 'âš ï¸'),
                  React.createElement('h3', { className: 'text-xl font-bold mb-2 text-red-400' }, 'Delete Client'),
                  React.createElement('p', { className: 'text-gray-300 mb-6' }, 
                    `Are you sure you want to delete ${client.firstName || client.first_name} ${client.lastName || client.last_name}? This action cannot be undone.`
                  ),
                  React.createElement('div', { className: 'flex space-x-3' },
                    React.createElement('button', {
                      onClick: handleDeleteClient,
                      disabled: loading,
                      className: 'flex-1 bg-red-600 text-white p-3 rounded hover:bg-red-700 disabled:opacity-50'
                    }, loading ? 'ðŸ—‘ï¸ Deleting...' : 'ðŸ—‘ï¸ Delete Client'),
                    React.createElement('button', {
                      onClick: () => setShowDeleteConfirm(false),
                      className: 'flex-1 bg-gray-600 text-white p-3 rounded hover:bg-gray-700'
                    }, 'Cancel')
                  )
                )
              )
            )
          );
        };

        const renderPropertiesTab = () => {
          const properties = client.propertiesOfInterest || [];
          
          return React.createElement('div', { className: 'space-y-4' },
            React.createElement('div', { className: 'flex justify-between items-center' },
              React.createElement('h4', { className: 'text-lg font-semibold' }, `ðŸ  Properties (${properties.length})`),
              React.createElement('button', {
                onClick: handleAddProperty,
                className: 'bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 flex items-center space-x-2'
              }, 
                React.createElement('span', null, '+'),
                React.createElement('span', null, 'Add Property')
              )
            ),
            
            properties.length === 0 ? 
              React.createElement('div', { className: 'text-center py-12 text-gray-400' },
                React.createElement('div', { className: 'text-6xl mb-4' }, 'ðŸ '),
                React.createElement('p', { className: 'text-lg mb-2' }, 'No properties yet'),
                React.createElement('p', null, 'Add properties this client is interested in'),
                React.createElement('button', {
                  onClick: handleAddProperty,
                  className: 'mt-4 bg-green-600 text-white px-6 py-3 rounded hover:bg-green-700'
                }, 'Add Your First Property')
              ) :
              React.createElement('div', { className: 'grid grid-cols-1 md:grid-cols-2 gap-4' },
                properties.map((property) =>
                  React.createElement('div', { 
                    key: property.id, 
                    className: 'bg-gray-700 p-4 rounded-lg border border-gray-600 hover:border-blue-500 transition-colors cursor-pointer',
                    onClick: () => setShowPropertyDetail(property)
                  },
                    React.createElement('div', { className: 'mb-3' },
                      React.createElement('div', { className: 'flex justify-between items-start mb-2' },
                        React.createElement('h5', { className: 'font-semibold text-lg text-white' }, property.address),
                        React.createElement('span', { 
                          className: `px-2 py-1 rounded text-xs ${
                            property.status === 'active' ? 'bg-green-600 text-green-100' :
                            property.status === 'pending' ? 'bg-yellow-600 text-yellow-100' :
                            property.status === 'sold' ? 'bg-red-600 text-red-100' : 'bg-gray-600'
                          }`
                        }, (property.status || 'active').toUpperCase())
                      ),
                      React.createElement('p', { className: 'text-green-400 font-bold text-xl' }, 
                        `$${property.price.toLocaleString()}`
                      ),
                      React.createElement('div', { className: 'grid grid-cols-3 gap-4 mt-2 text-sm text-gray-300' },
                        React.createElement('div', null, `ðŸ›ï¸ ${property.bedrooms} bed`),
                        React.createElement('div', null, `ðŸš¿ ${property.bathrooms} bath`),
                        React.createElement('div', null, `ðŸ“ ${property.sqft} sqft`)
                      )
                    ),
                    property.description && React.createElement('p', { className: 'text-sm text-gray-400 line-clamp-2 mb-3' }, 
                      property.description
                    ),
                    React.createElement('div', { className: 'flex justify-between items-center' },
                      React.createElement('span', { className: 'text-xs text-gray-500' }, 
                        property.propertyType ? property.propertyType.charAt(0).toUpperCase() + property.propertyType.slice(1) : 'House'
                      ),
                      React.createElement('div', { className: 'flex space-x-2' },
                        React.createElement('button', {
                          onClick: (e) => { e.stopPropagation(); handleEditProperty(property); },
                          className: 'text-blue-400 hover:text-blue-300 text-sm px-2 py-1 rounded bg-blue-900 bg-opacity-50'
                        }, 'âœï¸ Edit'),
                        React.createElement('button', {
                          onClick: (e) => { e.stopPropagation(); handleDeleteProperty(property.id); },
                          className: 'text-red-400 hover:text-red-300 text-sm px-2 py-1 rounded bg-red-900 bg-opacity-50'
                        }, 'ðŸ—‘ï¸ Delete')
                      )
                    )
                  )
                )
              ),
              
            // Property Detail Modal
            showPropertyDetail && React.createElement('div', { 
              className: 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50',
              onClick: () => setShowPropertyDetail(null)
            },
              React.createElement('div', { 
                className: 'bg-gray-800 rounded-lg p-6 max-w-2xl w-full mx-4 max-h-96 overflow-y-auto',
                onClick: (e) => e.stopPropagation()
              },
                React.createElement('div', { className: 'flex justify-between items-center mb-4' },
                  React.createElement('h3', { className: 'text-xl font-bold' }, showPropertyDetail.address),
                  React.createElement('button', {
                    onClick: () => setShowPropertyDetail(null),
                    className: 'text-gray-400 hover:text-white text-2xl'
                  }, 'Ã—')
                ),
                React.createElement('div', { className: 'space-y-4' },
                  React.createElement('div', { className: 'grid grid-cols-2 gap-4' },
                    React.createElement('div', null,
                      React.createElement('p', { className: 'text-sm text-gray-400' }, 'Price'),
                      React.createElement('p', { className: 'text-2xl font-bold text-green-400' }, 
                        `$${showPropertyDetail.price.toLocaleString()}`
                      )
                    ),
                    React.createElement('div', null,
                      React.createElement('p', { className: 'text-sm text-gray-400' }, 'Status'),
                      React.createElement('span', { 
                        className: `px-2 py-1 rounded text-sm ${
                          showPropertyDetail.status === 'active' ? 'bg-green-600 text-green-100' :
                          showPropertyDetail.status === 'pending' ? 'bg-yellow-600 text-yellow-100' :
                          'bg-red-600 text-red-100'
                        }`
                      }, (showPropertyDetail.status || 'active').toUpperCase())
                    )
                  ),
                  React.createElement('div', { className: 'grid grid-cols-4 gap-4' },
                    React.createElement('div', null,
                      React.createElement('p', { className: 'text-sm text-gray-400' }, 'Bedrooms'),
                      React.createElement('p', { className: 'font-semibold' }, `ðŸ›ï¸ ${showPropertyDetail.bedrooms}`)
                    ),
                    React.createElement('div', null,
                      React.createElement('p', { className: 'text-sm text-gray-400' }, 'Bathrooms'),
                      React.createElement('p', { className: 'font-semibold' }, `ðŸš¿ ${showPropertyDetail.bathrooms}`)
                    ),
                    React.createElement('div', null,
                      React.createElement('p', { className: 'text-sm text-gray-400' }, 'Square Feet'),
                      React.createElement('p', { className: 'font-semibold' }, `ðŸ“ ${showPropertyDetail.sqft}`)
                    ),
                    React.createElement('div', null,
                      React.createElement('p', { className: 'text-sm text-gray-400' }, 'Type'),
                      React.createElement('p', { className: 'font-semibold' }, 
                        showPropertyDetail.propertyType ? showPropertyDetail.propertyType.charAt(0).toUpperCase() + showPropertyDetail.propertyType.slice(1) : 'House'
                      )
                    )
                  ),
                  showPropertyDetail.yearBuilt && React.createElement('div', null,
                    React.createElement('p', { className: 'text-sm text-gray-400' }, 'Year Built'),
                    React.createElement('p', { className: 'font-semibold' }, showPropertyDetail.yearBuilt)
                  ),
                  showPropertyDetail.lotSize && React.createElement('div', null,
                    React.createElement('p', { className: 'text-sm text-gray-400' }, 'Lot Size'),
                    React.createElement('p', { className: 'font-semibold' }, `${showPropertyDetail.lotSize} acres`)
                  ),
                  showPropertyDetail.description && React.createElement('div', null,
                    React.createElement('p', { className: 'text-sm text-gray-400' }, 'Description'),
                    React.createElement('p', { className: 'text-gray-300' }, showPropertyDetail.description)
                  ),
                  showPropertyDetail.features && React.createElement('div', null,
                    React.createElement('p', { className: 'text-sm text-gray-400' }, 'Features'),
                    React.createElement('p', { className: 'text-gray-300' }, showPropertyDetail.features)
                  ),
                  React.createElement('div', { className: 'flex space-x-3 pt-4' },
                    React.createElement('button', {
                      onClick: () => { setShowPropertyDetail(null); handleEditProperty(showPropertyDetail); },
                      className: 'flex-1 bg-blue-600 text-white p-3 rounded hover:bg-blue-700'
                    }, 'âœï¸ Edit Property'),
                    React.createElement('button', {
                      onClick: () => { setShowPropertyDetail(null); handleDeleteProperty(showPropertyDetail.id); },
                      className: 'bg-red-600 text-white px-4 py-3 rounded hover:bg-red-700'
                    }, 'ðŸ—‘ï¸ Delete')
                  )
                )
              )
            )
          );
        };

        const renderTasksTab = () => {
          const tasks = client.todos || [];
          
          return React.createElement('div', { className: 'space-y-4' },
            React.createElement('div', { className: 'flex justify-between items-center' },
              React.createElement('h4', { className: 'text-lg font-semibold' }, `âœ“ Tasks (${tasks.length})`),
              React.createElement('button', {
                onClick: () => setShowAddTask(true),
                className: 'bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700'
              }, '+ Add Task')
            ),
            
            tasks.length === 0 ? 
              React.createElement('div', { className: 'text-center py-12 text-gray-400' },
                React.createElement('p', { className: 'text-lg mb-2' }, 'No tasks assigned'),
                React.createElement('p', null, 'Add tasks to track your client work')
              ) :
              React.createElement('div', { className: 'space-y-3' },
                tasks.map((task, index) =>
                  React.createElement('div', { 
                    key: index, 
                    className: `bg-gray-700 p-4 rounded-lg flex items-center justify-between ${
                      task.completed ? 'opacity-60' : ''
                    }`
                  },
                    React.createElement('div', { className: 'flex items-center space-x-3' },
                      React.createElement('input', {
                        type: 'checkbox',
                        checked: task.completed || false,
                        onChange: () => {
                          // Handle task completion toggle
                          console.log('Toggle task completion:', task);
                        },
                        className: 'w-4 h-4'
                      }),
                      React.createElement('div', null,
                        React.createElement('p', { 
                          className: `font-semibold ${task.completed ? 'line-through' : ''}` 
                        }, task.text),
                        React.createElement('p', { className: 'text-sm text-gray-400' }, 
                          task.dueDate ? `Due: ${new Date(task.dueDate).toLocaleDateString()}` : 'No due date'
                        )
                      )
                    ),
                    React.createElement('div', { className: 'flex items-center space-x-2' },
                      React.createElement('span', { 
                        className: `px-2 py-1 rounded text-xs ${
                          task.priority === 'high' ? 'bg-red-600' :
                          task.priority === 'medium' ? 'bg-yellow-600' : 'bg-green-600'
                        }`
                      }, task.priority || 'low'),
                      React.createElement('button', {
                        className: 'text-blue-400 hover:text-blue-300 text-sm'
                      }, 'âœï¸')
                    )
                  )
                )
              ),
              
            // Add Task Modal
            showAddTask && React.createElement('div', { 
              className: 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50',
              onClick: () => setShowAddTask(false)
            },
              React.createElement('div', { 
                className: 'bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4',
                onClick: (e) => e.stopPropagation()
              },
                React.createElement('h3', { className: 'text-xl font-bold mb-4' }, 'Add New Task'),
                React.createElement('p', { className: 'text-gray-400 mb-4' }, 
                  'Task management coming soon! This will allow you to assign and track tasks for this client.'
                ),
                React.createElement('button', {
                  onClick: () => setShowAddTask(false),
                  className: 'w-full bg-gray-600 text-white p-3 rounded hover:bg-gray-700'
                }, 'Close')
              )
            )
          );
        };

        const renderActivityTab = () => {
          const allActivity = [
            ...(client.calls || []).map(call => ({
              type: 'call',
              date: call.createdAt || call.date,
              title: `ðŸ“ž Call - ${call.outcome || 'Unknown outcome'}`,
              description: `Duration: ${call.duration} minutes. ${call.notes}`,
              icon: 'ðŸ“ž'
            })),
            ...(client.transactions || []).map(txn => ({
              type: 'transaction',
              date: txn.close_date || txn.createdAt,
              title: `ðŸ’° ${txn.type || 'Sale'} - ${txn.address || 'Property'}`,
              description: `Sale Price: $${(txn.price || 0).toLocaleString()}, Commission: $${(txn.net_commission || 0).toLocaleString()}`,
              icon: 'ðŸ’°'
            })),
            // Add other activity types as needed
          ].sort((a, b) => new Date(b.date) - new Date(a.date));

          return React.createElement('div', { className: 'space-y-4' },
            React.createElement('h4', { className: 'text-lg font-semibold mb-4' }, `ðŸ“ˆ Activity Timeline (${allActivity.length})`),
            
            allActivity.length === 0 ? 
              React.createElement('div', { className: 'text-center py-12 text-gray-400' },
                React.createElement('p', { className: 'text-lg mb-2' }, 'No activity yet'),
                React.createElement('p', null, 'Client interactions will appear here')
              ) :
              React.createElement('div', { className: 'space-y-4 max-h-96 overflow-y-auto' },
                allActivity.map((activity, index) =>
                  React.createElement('div', { 
                    key: index, 
                    className: 'bg-gray-700 p-4 rounded-lg border-l-4 border-blue-500'
                  },
                    React.createElement('div', { className: 'flex justify-between items-start' },
                      React.createElement('div', null,
                        React.createElement('h5', { className: 'font-semibold flex items-center' },
                          React.createElement('span', { className: 'mr-2' }, activity.icon),
                          activity.title
                        ),
                        React.createElement('p', { className: 'text-sm text-gray-300 mt-1' }, activity.description),
                        React.createElement('p', { className: 'text-xs text-gray-400 mt-2' }, 
                          activity.date ? new Date(activity.date).toLocaleDateString('en-US', { 
                            month: 'short', day: 'numeric', year: 'numeric', hour: '2-digit', minute: '2-digit' 
                          }) : 'Date unknown'
                        )
                      )
                    )
                  )
                )
              )
          );
        };

        return React.createElement('div', { 
          className: 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50',
          onClick: onClose
        },
          React.createElement('div', { 
            className: 'bg-gray-800 rounded-lg max-w-4xl w-full mx-4 max-h-[90vh] flex flex-col',
            onClick: (e) => e.stopPropagation()
          },
            // Header
            React.createElement('div', { className: 'flex justify-between items-center p-6 border-b border-gray-700' },
              React.createElement('h2', { className: 'text-2xl font-bold flex items-center' }, 
                React.createElement('span', { className: 'mr-3' }, 'ðŸŽ¯'),
                '360Â° Client View - ',
                `${client.firstName || client.first_name || 'Unknown'} ${client.lastName || client.last_name || 'Client'}`
              ),
              React.createElement('div', { className: 'flex items-center space-x-3' },
                !isEditing && React.createElement('button', {
                  onClick: () => setIsEditing(true),
                  className: 'bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 flex items-center space-x-2'
                }, 
                  React.createElement('span', null, 'âœï¸'),
                  React.createElement('span', null, 'Edit')
                ),
                !isEditing && React.createElement('button', {
                  onClick: () => setShowDeleteConfirm(true),
                  className: 'bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 flex items-center space-x-2'
                }, 
                  React.createElement('span', null, 'ðŸ—‘ï¸'),
                  React.createElement('span', null, 'Delete')
                ),
                React.createElement('button', {
                  onClick: onClose,
                  className: 'text-gray-400 hover:text-white text-2xl'
                }, 'Ã—')
              )
            ),

            // Tab Navigation
            React.createElement('div', { className: 'flex border-b border-gray-700' },
              tabs.map(tab =>
                React.createElement('button', {
                  key: tab.id,
                  onClick: () => setActiveTab(tab.id),
                  className: `px-6 py-4 font-semibold transition-colors flex items-center space-x-2 ${
                    activeTab === tab.id 
                      ? 'text-blue-400 border-b-2 border-blue-400 bg-gray-700' 
                      : 'text-gray-400 hover:text-white hover:bg-gray-700'
                  }`
                }, 
                  React.createElement('span', null, tab.icon),
                  React.createElement('span', null, tab.label)
                )
              )
            ),

            // Tab Content
            React.createElement('div', { className: 'flex-1 overflow-y-auto p-6' },
              activeTab === 'overview' && renderOverviewTab(),
              activeTab === 'properties' && renderPropertiesTab(),
              activeTab === 'tasks' && renderTasksTab(),
              activeTab === 'activity' && renderActivityTab()
            )
          )
        );
      }

      // Call Log Modal Component
      function CallLogModal({ client, onClose, onLog }) {
        const [duration, setDuration] = useState('');
        const [notes, setNotes] = useState('');
        const [outcome, setOutcome] = useState('');
        const [followUp, setFollowUp] = useState(false);

        const handleSubmit = (e) => {
          e.preventDefault();
          onLog(client.id, { duration, notes, outcome, followUp });
        };

        return React.createElement('div', { 
          className: 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50',
          onClick: onClose
        },
          React.createElement('div', { 
            className: 'bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4',
            onClick: (e) => e.stopPropagation()
          },
            React.createElement('h2', { className: 'text-xl font-bold mb-4' }, 
              `Log Call - ${client.firstName} ${client.lastName}`
            ),
            
            React.createElement('form', { onSubmit: handleSubmit, className: 'space-y-4' },
              React.createElement('input', {
                type: 'number',
                placeholder: 'Call duration (minutes)',
                value: duration,
                onChange: (e) => setDuration(e.target.value),
                className: 'w-full p-3 bg-gray-700 rounded border border-gray-600 text-white',
                required: true
              }),
              React.createElement('select', {
                value: outcome,
                onChange: (e) => setOutcome(e.target.value),
                className: 'w-full p-3 bg-gray-700 rounded border border-gray-600 text-white',
                required: true
              },
                React.createElement('option', { value: '' }, 'Select outcome'),
                React.createElement('option', { value: 'Connected' }, 'Connected'),
                React.createElement('option', { value: 'Voicemail' }, 'Voicemail'),
                React.createElement('option', { value: 'No Answer' }, 'No Answer'),
                React.createElement('option', { value: 'Busy' }, 'Busy')
              ),
              React.createElement('textarea', {
                placeholder: 'Call notes...',
                value: notes,
                onChange: (e) => setNotes(e.target.value),
                rows: 3,
                className: 'w-full p-3 bg-gray-700 rounded border border-gray-600 text-white'
              }),
              React.createElement('label', { className: 'flex items-center space-x-2' },
                React.createElement('input', {
                  type: 'checkbox',
                  checked: followUp,
                  onChange: (e) => setFollowUp(e.target.checked),
                  className: 'rounded'
                }),
                React.createElement('span', null, 'Schedule follow-up')
              ),
              React.createElement('div', { className: 'flex space-x-3' },
                React.createElement('button', {
                  type: 'submit',
                  className: 'flex-1 bg-blue-600 text-white p-3 rounded hover:bg-blue-700'
                }, 'Log Call'),
                React.createElement('button', {
                  type: 'button',
                  onClick: onClose,
                  className: 'flex-1 bg-gray-600 text-white p-3 rounded hover:bg-gray-700'
                }, 'Cancel')
              )
            )
          )
        );
      }

      // Add Client Modal Component
      function AddClientModal({ onClose, onAdd }) {
        const [formData, setFormData] = useState({
          firstName: '',
          lastName: '',
          email: '',
          phone: '',
          address: '',
          birthday: '',
          anniversary: '',
          spouse: '',
          children: '',
          notes: '',
          tags: ''
        });

        const handleSubmit = (e) => {
          e.preventDefault();
          onAdd({
            ...formData,
            tags: formData.tags.split(',').map(tag => tag.trim()).filter(tag => tag)
          });
        };

        const handleChange = (field, value) => {
          setFormData(prev => ({ ...prev, [field]: value }));
        };

        return React.createElement('div', { 
          className: 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50',
          onClick: onClose
        },
          React.createElement('div', { 
            className: 'bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4 max-h-96 overflow-y-auto',
            onClick: (e) => e.stopPropagation()
          },
            React.createElement('h2', { className: 'text-xl font-bold mb-4' }, 'Add New Client'),
            
            React.createElement('form', { onSubmit: handleSubmit, className: 'space-y-4' },
              React.createElement('div', { className: 'grid grid-cols-2 gap-3' },
                React.createElement('input', {
                  type: 'text',
                  placeholder: 'First Name',
                  value: formData.firstName,
                  onChange: (e) => handleChange('firstName', e.target.value),
                  className: 'p-3 bg-gray-700 rounded border border-gray-600 text-white',
                  required: true
                }),
                React.createElement('input', {
                  type: 'text',
                  placeholder: 'Last Name',
                  value: formData.lastName,
                  onChange: (e) => handleChange('lastName', e.target.value),
                  className: 'p-3 bg-gray-700 rounded border border-gray-600 text-white',
                  required: true
                })
              ),
              React.createElement('input', {
                type: 'email',
                placeholder: 'Email',
                value: formData.email,
                onChange: (e) => handleChange('email', e.target.value),
                className: 'w-full p-3 bg-gray-700 rounded border border-gray-600 text-white',
                required: true
              }),
              React.createElement('input', {
                type: 'tel',
                placeholder: 'Phone',
                value: formData.phone,
                onChange: (e) => handleChange('phone', e.target.value),
                className: 'w-full p-3 bg-gray-700 rounded border border-gray-600 text-white'
              }),
              React.createElement('input', {
                type: 'text',
                placeholder: 'Address',
                value: formData.address,
                onChange: (e) => handleChange('address', e.target.value),
                className: 'w-full p-3 bg-gray-700 rounded border border-gray-600 text-white'
              }),
              
              // Personal Information Section
              React.createElement('div', { className: 'grid grid-cols-2 gap-3' },
                React.createElement('input', {
                  type: 'date',
                  placeholder: 'Birthday',
                  value: formData.birthday,
                  onChange: (e) => handleChange('birthday', e.target.value),
                  className: 'p-3 bg-gray-700 rounded border border-gray-600 text-white'
                }),
                React.createElement('input', {
                  type: 'date',
                  placeholder: 'Anniversary',
                  value: formData.anniversary,
                  onChange: (e) => handleChange('anniversary', e.target.value),
                  className: 'p-3 bg-gray-700 rounded border border-gray-600 text-white'
                })
              ),
              React.createElement('div', { className: 'grid grid-cols-2 gap-3' },
                React.createElement('input', {
                  type: 'text',
                  placeholder: 'Spouse Name',
                  value: formData.spouse,
                  onChange: (e) => handleChange('spouse', e.target.value),
                  className: 'p-3 bg-gray-700 rounded border border-gray-600 text-white'
                }),
                React.createElement('input', {
                  type: 'text',
                  placeholder: 'Children (e.g. Emma 12, Jake 8)',
                  value: formData.children,
                  onChange: (e) => handleChange('children', e.target.value),
                  className: 'p-3 bg-gray-700 rounded border border-gray-600 text-white'
                })
              ),
              React.createElement('input', {
                type: 'text',
                placeholder: 'Tags (comma-separated)',
                value: formData.tags,
                onChange: (e) => handleChange('tags', e.target.value),
                className: 'w-full p-3 bg-gray-700 rounded border border-gray-600 text-white'
              }),
              React.createElement('textarea', {
                placeholder: 'Notes',
                value: formData.notes,
                onChange: (e) => handleChange('notes', e.target.value),
                rows: 3,
                className: 'w-full p-3 bg-gray-700 rounded border border-gray-600 text-white'
              }),
              React.createElement('div', { className: 'flex space-x-3' },
                React.createElement('button', {
                  type: 'submit',
                  className: 'flex-1 bg-green-600 text-white p-3 rounded hover:bg-green-700'
                }, 'Add Client'),
                React.createElement('button', {
                  type: 'button',
                  onClick: onClose,
                  className: 'flex-1 bg-gray-600 text-white p-3 rounded hover:bg-gray-700'
                }, 'Cancel')
              )
            )
          )
        );
      }

      // Property Modal Component
      function PropertyModal({ client, onClose }) {
        return React.createElement('div', { 
          className: 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50',
          onClick: onClose
        },
          React.createElement('div', { 
            className: 'bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4',
            onClick: (e) => e.stopPropagation()
          },
            React.createElement('h2', { className: 'text-xl font-bold mb-4' }, 
              `Properties - ${client.firstName} ${client.lastName}`
            ),
            React.createElement('p', { className: 'text-gray-400 mb-4' }, 
              'Property management feature coming soon!'
            ),
            React.createElement('button', {
              onClick: onClose,
              className: 'w-full bg-gray-600 text-white p-3 rounded hover:bg-gray-700'
            }, 'Close')
          )
        );
      }

      // Render the app
      const root = ReactDOM.createRoot(document.getElementById('root'));
      root.render(React.createElement(NetflixCRM));
    </script>
  </body>
</html>